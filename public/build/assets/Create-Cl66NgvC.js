import{d as $,r as F,i as V,c as q,w as _,a as o,j as k,u as s,l as y,f as p,m as v,b as c,e as u,n as f,v as b,o as a,t as d,s as L}from"./app--1_n6QmE.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-DiNSmrMh.js";import{r as x}from"./routes-BdA70M5q.js";import{u as E}from"./useSweetAlert-CjcY7Pj8.js";import"./BootstrapLayout-DS_PED8n.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const D={class:"d-flex justify-content-between align-items-center mb-4"},R={class:"row justify-content-center"},j={class:"col-lg-8"},G={class:"card"},N={class:"card-body"},S={class:"mb-3"},U={key:0,class:"invalid-feedback"},z={key:1,class:"invalid-feedback"},I={class:"mb-3"},M={key:0,class:"invalid-feedback"},T={key:1,class:"invalid-feedback"},O={class:"mb-3"},H={class:"row g-2"},J={class:"col-auto"},K={class:"col"},P={key:0,class:"text-danger small"},Q={key:1,class:"text-danger small"},W={class:"mb-4"},X={class:"p-3 border rounded bg-light"},Y={class:"d-flex align-items-center"},Z={class:"fw-medium"},ee={class:"text-muted small"},oe={class:"d-flex gap-2"},se=["disabled"],te={key:0,class:"spinner-border spinner-border-sm me-2"},re={key:1,class:"bi bi-check-circle me-1"},pe=$({__name:"Create",setup(le){const{success:h,error:B}=E(),l=F({}),t=V({name:"",description:"",color:"#3B82F6"}),C=()=>{const i={};return(!t.name||t.name.trim().length<2)&&(i.name="Le nom de la catégorie est requis (minimum 2 caractères)"),t.name&&t.name.length>255&&(i.name="Le nom ne peut pas dépasser 255 caractères"),t.description&&t.description.length>1e3&&(i.description="La description ne peut pas dépasser 1000 caractères"),(!t.color||!/^#[0-9A-Fa-f]{6}$/.test(t.color))&&(i.color="La couleur est requise et doit être au format hexadécimal (#RRGGBB)"),Object.keys(i).length===0?null:i},m=(i,e)=>{l.value[i]&&delete l.value[i];let r="";switch(i){case"name":!e||e.trim().length<2?r="Le nom de la catégorie est requis (minimum 2 caractères)":e.length>255&&(r="Le nom ne peut pas dépasser 255 caractères");break;case"description":e&&e.length>1e3&&(r="La description ne peut pas dépasser 1000 caractères");break;case"color":(!e||!/^#[0-9A-Fa-f]{6}$/.test(e))&&(r="La couleur est requise et doit être au format hexadécimal (#RRGGBB)");break}r&&(l.value[i]=r)},w=()=>{l.value={};const i=C();if(i){l.value=i;return}t.post(x("categories.store"),{onSuccess:()=>{h("Catégorie créée avec succès !"),l.value={}},onError:()=>{B("Erreur lors de la création de la catégorie.")}})},{errors:n,processing:g}=t;return(i,e)=>(a(),q(A,null,{default:_(()=>[o("div",D,[e[12]||(e[12]=o("div",null,[o("h1",{class:"h2 mb-1"},"Nouvelle catégorie"),o("p",{class:"text-muted mb-0"},"Créez une nouvelle catégorie de produits")],-1)),k(s(y),{href:s(x)("categories.index"),class:"btn btn-outline-secondary"},{default:_(()=>[...e[11]||(e[11]=[o("i",{class:"bi bi-arrow-left me-1"},null,-1),p(" Retour à la liste ",-1)])]),_:1},8,["href"])]),o("div",R,[o("div",j,[o("div",G,[o("div",N,[o("form",null,[o("div",S,[e[13]||(e[13]=o("label",{class:"form-label"},[p(" Nom de la catégorie "),o("span",{class:"text-danger"},"*")],-1)),v(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).name=r),type:"text",required:"",class:f(["form-control",{"is-invalid":s(n).name||l.value.name}]),placeholder:"Ex: Électronique, Vêtements, Alimentaire...",onBlur:e[1]||(e[1]=r=>m("name",s(t).name)),onInput:e[2]||(e[2]=r=>m("name",s(t).name))},null,34),[[b,s(t).name]]),s(n).name?(a(),c("div",U,d(s(n).name),1)):u("",!0),l.value.name?(a(),c("div",z,d(l.value.name),1)):u("",!0)]),o("div",I,[e[14]||(e[14]=o("label",{class:"form-label"},"Description",-1)),v(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(t).description=r),rows:"3",class:f(["form-control",{"is-invalid":s(n).description||l.value.description}]),placeholder:"Description de la catégorie (optionnel)",onBlur:e[4]||(e[4]=r=>m("description",s(t).description)),onInput:e[5]||(e[5]=r=>m("description",s(t).description))},null,34),[[b,s(t).description]]),s(n).description?(a(),c("div",M,d(s(n).description),1)):u("",!0),l.value.description?(a(),c("div",T,d(l.value.description),1)):u("",!0)]),o("div",O,[e[16]||(e[16]=o("label",{class:"form-label"},[p(" Couleur "),o("span",{class:"text-danger"},"*")],-1)),o("div",H,[o("div",J,[v(o("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>s(t).color=r),type:"color",required:"",class:f(["form-control form-control-color",{"is-invalid":s(n).color||l.value.color}]),onChange:e[7]||(e[7]=r=>m("color",s(t).color))},null,34),[[b,s(t).color]])]),o("div",K,[v(o("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>s(t).color=r),type:"text",required:"",class:f(["form-control font-monospace",{"is-invalid":s(n).color||l.value.color}]),placeholder:"#3B82F6",pattern:"^#[0-9A-Fa-f]{6}$",onBlur:e[9]||(e[9]=r=>m("color",s(t).color)),onInput:e[10]||(e[10]=r=>m("color",s(t).color))},null,34),[[b,s(t).color]]),e[15]||(e[15]=o("div",{class:"form-text"}," Format hexadécimal (ex: #3B82F6) ",-1))])]),s(n).color?(a(),c("div",P,d(s(n).color),1)):u("",!0),l.value.color?(a(),c("div",Q,d(l.value.color),1)):u("",!0)]),o("div",W,[e[17]||(e[17]=o("label",{class:"form-label"},"Aperçu",-1)),o("div",X,[o("div",Y,[o("div",{class:"rounded-circle me-3",style:L([{width:"16px",height:"16px"},{backgroundColor:s(t).color}])},null,4),o("div",null,[o("div",Z,d(s(t).name||"Nom de la catégorie"),1),o("div",ee,d(s(t).description||"Description de la catégorie"),1)])])])]),o("div",oe,[o("button",{type:"button",class:"btn btn-primary",disabled:s(g),onClick:w},[s(g)?(a(),c("span",te)):(a(),c("i",re)),p(" "+d(s(g)?"Création...":"Créer la catégorie"),1)],8,se),k(s(y),{href:s(x)("categories.index"),class:"btn btn-outline-secondary"},{default:_(()=>[...e[18]||(e[18]=[p(" Annuler ",-1)])]),_:1},8,["href"])])])])])])])]),_:1}))}});export{pe as default};
