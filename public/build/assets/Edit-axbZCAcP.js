import{d as E,i as U,r as F,c as I,w as k,a as t,j as $,u as s,l as w,f,m as b,b as r,e as m,n as y,v as _,o as d,t as u,p as M}from"./app-CGqa7dvF.js";import{_ as h}from"./AppLayout.vue_vue_type_script_setup_true_lang-CUowRV7B.js";import{r as g}from"./routes-Ds1K_LXc.js";import{u as A}from"./useSweetAlert-CjcY7Pj8.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BootstrapLayout-L_TowVZG.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const S={class:"d-flex justify-content-between align-items-center mb-4"},N={class:"card mb-4"},T={class:"card-body"},j={class:"row g-3"},z={class:"col-md-8"},O={key:0,class:"invalid-feedback"},R={key:1,class:"invalid-feedback"},W={class:"col-md-4"},G={class:"input-group"},H={key:0,class:"invalid-feedback"},J={key:1,class:"invalid-feedback"},K={class:"row g-3 mt-2"},P={class:"col-md-6"},Q={key:0,class:"invalid-feedback"},X={key:1,class:"invalid-feedback"},Y={class:"col-md-6"},Z={key:0,class:"invalid-feedback"},ee={key:1,class:"invalid-feedback"},te={class:"row g-3 mt-2"},se={class:"col-md-6"},oe={key:0,class:"invalid-feedback"},ne={key:1,class:"invalid-feedback"},ie={class:"col-md-6"},ae={key:0,class:"invalid-feedback"},le={key:1,class:"invalid-feedback"},de={class:"card mb-4"},re={class:"card-body"},ue={class:"row g-3"},pe={class:"col-md-6"},me={key:0,class:"invalid-feedback"},ve={key:1,class:"invalid-feedback"},ce={class:"row g-3 mt-2"},fe={class:"col-12"},be={key:0,class:"invalid-feedback"},ye={key:1,class:"invalid-feedback"},_e={class:"row g-3 mt-2"},xe={class:"col-12"},ke={key:0,class:"invalid-feedback"},ge={key:1,class:"invalid-feedback"},$e={class:"card"},we={class:"card-body"},Me={class:"d-grid gap-2"},qe=["disabled"],Be={key:0,class:"spinner-border spinner-border-sm me-2"},Ve={key:1,class:"bi bi-check-circle me-1"},Ce=E({__name:"Edit",props:{expense:{}},setup(q){const v=q,{success:B,error:V}=A(),i=U({title:v.expense.title,description:v.expense.description||"",amount:v.expense.amount,category:v.expense.category,payment_method:v.expense.payment_method,expense_date:v.expense.expense_date,receipt_number:v.expense.receipt_number||"",vendor:v.expense.vendor||"",notes:v.expense.notes||""}),n=F({}),c=l=>typeof l=="string"?l.trim()!=="":typeof l=="number"?l!=null&&l!==0:l!=null,C=()=>{const l={};return c(i.title)||(l.title="Le titre est requis"),c(i.amount)?i.amount<0&&(l.amount="Le montant doit être positif"):l.amount="Le montant est requis",c(i.category)||(l.category="La catégorie est requise"),c(i.payment_method)||(l.payment_method="La méthode de paiement est requise"),c(i.expense_date)||(l.expense_date="La date de dépense est requise"),l},p=l=>{const e=i[l];let o="";switch(l){case"title":c(e)||(o="Le titre est requis");break;case"amount":c(e)?i.amount<0&&(o="Le montant doit être positif"):o="Le montant est requis";break;case"category":c(e)||(o="La catégorie est requise");break;case"payment_method":c(e)||(o="La méthode de paiement est requise");break;case"expense_date":c(e)||(o="La date de dépense est requise");break}o?n.value[l]=o:delete n.value[l]},L=()=>{n.value={};const l=C();if(Object.keys(l).length>0){n.value=l;return}i.put(g("expenses.update",{id:v.expense.id}),{onSuccess:()=>{B("Dépense modifiée avec succès !")},onError:()=>{V("Erreur lors de la modification de la dépense.")}})},{errors:a,processing:x}=i;return(l,e)=>(d(),I(h,null,{default:k(()=>[t("div",S,[e[28]||(e[28]=t("div",null,[t("h1",{class:"h2 mb-1"},"Modifier la dépense"),t("p",{class:"text-muted mb-0"},"Modifiez les informations de la dépense")],-1)),$(s(w),{href:s(g)("expenses.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[27]||(e[27]=[t("i",{class:"bi bi-arrow-left me-1"},null,-1),f(" Retour à la liste ",-1)])]),_:1},8,["href"])]),t("form",null,[t("div",N,[e[38]||(e[38]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-info-circle me-2"}),f(" Informations générales ")])],-1)),t("div",T,[t("div",j,[t("div",z,[e[29]||(e[29]=t("label",{for:"title",class:"form-label"},[f(" Titre de la dépense "),t("span",{class:"text-danger"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(i).title=o),type:"text",class:y(["form-control",{"is-invalid":s(a).title||n.value.title}]),id:"title",placeholder:"Ex: Achat de fournitures de bureau",onInput:e[1]||(e[1]=o=>p("title")),onBlur:e[2]||(e[2]=o=>p("title"))},null,34),[[_,s(i).title]]),s(a).title?(d(),r("div",O,u(s(a).title),1)):m("",!0),n.value.title?(d(),r("div",R,u(n.value.title),1)):m("",!0)]),t("div",W,[e[31]||(e[31]=t("label",{for:"amount",class:"form-label"},[f(" Montant "),t("span",{class:"text-danger"},"*")],-1)),t("div",G,[b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(i).amount=o),type:"number",step:"0.01",min:"0",class:y(["form-control",{"is-invalid":s(a).amount||n.value.amount}]),id:"amount",placeholder:"0.00",onInput:e[4]||(e[4]=o=>p("amount")),onBlur:e[5]||(e[5]=o=>p("amount"))},null,34),[[_,s(i).amount]]),e[30]||(e[30]=t("span",{class:"input-group-text"},"Fcfa",-1))]),s(a).amount?(d(),r("div",H,u(s(a).amount),1)):m("",!0),n.value.amount?(d(),r("div",J,u(n.value.amount),1)):m("",!0)])]),t("div",K,[t("div",P,[e[33]||(e[33]=t("label",{for:"category",class:"form-label"},[f(" Catégorie "),t("span",{class:"text-danger"},"*")],-1)),b(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s(i).category=o),class:y(["form-select",{"is-invalid":s(a).category||n.value.category}]),id:"category",onChange:e[7]||(e[7]=o=>p("category")),onBlur:e[8]||(e[8]=o=>p("category"))},[...e[32]||(e[32]=[t("option",{value:""},"Sélectionner une catégorie",-1),t("option",{value:"fournitures"},"Fournitures",-1),t("option",{value:"equipement"},"Équipement",-1),t("option",{value:"marketing"},"Marketing",-1),t("option",{value:"transport"},"Transport",-1),t("option",{value:"formation"},"Formation",-1),t("option",{value:"maintenance"},"Maintenance",-1),t("option",{value:"utilities"},"Services publics",-1),t("option",{value:"autres"},"Autres",-1)])],34),[[M,s(i).category]]),s(a).category?(d(),r("div",Q,u(s(a).category),1)):m("",!0),n.value.category?(d(),r("div",X,u(n.value.category),1)):m("",!0)]),t("div",Y,[e[35]||(e[35]=t("label",{for:"payment_method",class:"form-label"},[f(" Méthode de paiement "),t("span",{class:"text-danger"},"*")],-1)),b(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>s(i).payment_method=o),class:y(["form-select",{"is-invalid":s(a).payment_method||n.value.payment_method}]),id:"payment_method",onChange:e[10]||(e[10]=o=>p("payment_method")),onBlur:e[11]||(e[11]=o=>p("payment_method"))},[...e[34]||(e[34]=[t("option",{value:""},"Sélectionner une méthode",-1),t("option",{value:"cash"},"Espèces",-1),t("option",{value:"bank_transfer"},"Virement bancaire",-1),t("option",{value:"credit_card"},"Carte de crédit",-1),t("option",{value:"mobile_money"},"Mobile Money",-1),t("option",{value:"orange_money"},"Orange Money",-1),t("option",{value:"wave"},"Wave",-1),t("option",{value:"check"},"Chèque",-1)])],34),[[M,s(i).payment_method]]),s(a).payment_method?(d(),r("div",Z,u(s(a).payment_method),1)):m("",!0),n.value.payment_method?(d(),r("div",ee,u(n.value.payment_method),1)):m("",!0)])]),t("div",te,[t("div",se,[e[36]||(e[36]=t("label",{for:"expense_date",class:"form-label"},[f(" Date de la dépense "),t("span",{class:"text-danger"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s(i).expense_date=o),type:"date",class:y(["form-control",{"is-invalid":s(a).expense_date||n.value.expense_date}]),id:"expense_date",onChange:e[13]||(e[13]=o=>p("expense_date")),onBlur:e[14]||(e[14]=o=>p("expense_date"))},null,34),[[_,s(i).expense_date]]),s(a).expense_date?(d(),r("div",oe,u(s(a).expense_date),1)):m("",!0),n.value.expense_date?(d(),r("div",ne,u(n.value.expense_date),1)):m("",!0)]),t("div",ie,[e[37]||(e[37]=t("label",{for:"vendor",class:"form-label"},"Fournisseur",-1)),b(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>s(i).vendor=o),type:"text",class:y(["form-control",{"is-invalid":s(a).vendor||n.value.vendor}]),id:"vendor",placeholder:"Ex: Magasin ABC",onInput:e[16]||(e[16]=o=>p("vendor")),onBlur:e[17]||(e[17]=o=>p("vendor"))},null,34),[[_,s(i).vendor]]),s(a).vendor?(d(),r("div",ae,u(s(a).vendor),1)):m("",!0),n.value.vendor?(d(),r("div",le,u(n.value.vendor),1)):m("",!0)])])])]),t("div",de,[e[42]||(e[42]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-file-text me-2"}),f(" Détails supplémentaires ")])],-1)),t("div",re,[t("div",ue,[t("div",pe,[e[39]||(e[39]=t("label",{for:"receipt_number",class:"form-label"},"Numéro de reçu/facture",-1)),b(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s(i).receipt_number=o),type:"text",class:y(["form-control",{"is-invalid":s(a).receipt_number||n.value.receipt_number}]),id:"receipt_number",placeholder:"Ex: FAC-2025-001",onInput:e[19]||(e[19]=o=>p("receipt_number")),onBlur:e[20]||(e[20]=o=>p("receipt_number"))},null,34),[[_,s(i).receipt_number]]),s(a).receipt_number?(d(),r("div",me,u(s(a).receipt_number),1)):m("",!0),n.value.receipt_number?(d(),r("div",ve,u(n.value.receipt_number),1)):m("",!0)])]),t("div",ce,[t("div",fe,[e[40]||(e[40]=t("label",{for:"description",class:"form-label"},"Description",-1)),b(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=o=>s(i).description=o),class:y(["form-control",{"is-invalid":s(a).description||n.value.description}]),id:"description",rows:"3",placeholder:"Description détaillée de la dépense...",onInput:e[22]||(e[22]=o=>p("description")),onBlur:e[23]||(e[23]=o=>p("description"))},null,34),[[_,s(i).description]]),s(a).description?(d(),r("div",be,u(s(a).description),1)):m("",!0),n.value.description?(d(),r("div",ye,u(n.value.description),1)):m("",!0)])]),t("div",_e,[t("div",xe,[e[41]||(e[41]=t("label",{for:"notes",class:"form-label"},"Notes",-1)),b(t("textarea",{"onUpdate:modelValue":e[24]||(e[24]=o=>s(i).notes=o),class:y(["form-control",{"is-invalid":s(a).notes||n.value.notes}]),id:"notes",rows:"2",placeholder:"Notes additionnelles...",onInput:e[25]||(e[25]=o=>p("notes")),onBlur:e[26]||(e[26]=o=>p("notes"))},null,34),[[_,s(i).notes]]),s(a).notes?(d(),r("div",ke,u(s(a).notes),1)):m("",!0),n.value.notes?(d(),r("div",ge,u(n.value.notes),1)):m("",!0)])])])]),t("div",$e,[e[44]||(e[44]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Actions")],-1)),t("div",we,[t("div",Me,[t("button",{type:"button",onClick:L,class:"btn btn-primary",disabled:s(x)},[s(x)?(d(),r("span",Be)):(d(),r("i",Ve)),f(" "+u(s(x)?"Modification...":"Modifier la dépense"),1)],8,qe),$(s(w),{href:s(g)("expenses.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[43]||(e[43]=[f(" Annuler ",-1)])]),_:1},8,["href"])])])])])]),_:1}))}}),De=D(Ce,[["__scopeId","data-v-202f999a"]]);export{De as default};
