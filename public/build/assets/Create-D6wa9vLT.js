import{d as L,i as M,r as E,c as D,w as k,a as t,j as x,u as s,l as $,f as c,m as f,b as d,e as m,n as b,v as y,o as r,t as u,p as w}from"./app-BrkohfQq.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-ClsnqJJt.js";import{r as g}from"./routes-C8N3XD_S.js";import{u as I}from"./useSweetAlert-CjcY7Pj8.js";import{a as U}from"./BootstrapLayout-DdWhaGDh.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const S={class:"d-flex justify-content-between align-items-center mb-4"},h={class:"card mb-4"},N={class:"card-body"},T={class:"row g-3"},j={class:"col-md-8"},z={key:0,class:"invalid-feedback"},O={key:1,class:"invalid-feedback"},R={class:"col-md-4"},W={class:"input-group"},G={key:0,class:"invalid-feedback"},H={key:1,class:"invalid-feedback"},J={class:"row g-3 mt-2"},K={class:"col-md-6"},P={key:0,class:"invalid-feedback"},Q={key:1,class:"invalid-feedback"},X={class:"col-md-6"},Y={key:0,class:"invalid-feedback"},Z={key:1,class:"invalid-feedback"},ee={class:"row g-3 mt-2"},te={class:"col-md-6"},se={key:0,class:"invalid-feedback"},oe={key:1,class:"invalid-feedback"},ne={class:"col-md-6"},ie={key:0,class:"invalid-feedback"},ae={key:1,class:"invalid-feedback"},le={class:"card mb-4"},re={class:"card-body"},de={class:"row g-3"},ue={class:"col-md-6"},pe={key:0,class:"invalid-feedback"},me={key:1,class:"invalid-feedback"},ve={class:"row g-3 mt-2"},ce={class:"col-12"},fe={key:0,class:"invalid-feedback"},be={key:1,class:"invalid-feedback"},ye={class:"row g-3 mt-2"},_e={class:"col-12"},ke={key:0,class:"invalid-feedback"},ge={key:1,class:"invalid-feedback"},xe={class:"card"},$e={class:"card-body"},we={class:"d-grid gap-2"},Ce=["disabled"],qe={key:0,class:"spinner-border spinner-border-sm me-2"},Be={key:1,class:"bi bi-check-circle me-1"},Ve=L({__name:"Create",setup(Le){const{success:C,error:q}=I(),i=M({title:"",description:"",amount:0,category:"",payment_method:"",expense_date:U(new Date),receipt_number:"",vendor:"",notes:""}),n=E({}),v=l=>typeof l=="string"?l.trim()!=="":typeof l=="number"?l!=null&&l!==0:l!=null,B=()=>{const l={};return v(i.title)||(l.title="Le titre est requis"),v(i.amount)?i.amount<0&&(l.amount="Le montant doit être positif"):l.amount="Le montant est requis",v(i.category)||(l.category="La catégorie est requise"),v(i.payment_method)||(l.payment_method="La méthode de paiement est requise"),v(i.expense_date)||(l.expense_date="La date de dépense est requise"),l},p=l=>{const e=i[l];let o="";switch(l){case"title":v(e)||(o="Le titre est requis");break;case"amount":v(e)?i.amount<0&&(o="Le montant doit être positif"):o="Le montant est requis";break;case"category":v(e)||(o="La catégorie est requise");break;case"payment_method":v(e)||(o="La méthode de paiement est requise");break;case"expense_date":v(e)||(o="La date de dépense est requise");break}o?n.value[l]=o:delete n.value[l]},V=()=>{n.value={};const l=B();if(Object.keys(l).length>0){n.value=l;return}i.post(g("expenses.store"),{onSuccess:()=>{C("Dépense créée avec succès !")},onError:()=>{q("Erreur lors de la création de la dépense.")}})},{errors:a,processing:_}=i;return(l,e)=>(r(),D(F,null,{default:k(()=>[t("div",S,[e[28]||(e[28]=t("div",null,[t("h1",{class:"h2 mb-1"},"Nouvelle dépense"),t("p",{class:"text-muted mb-0"},"Enregistrez une nouvelle dépense")],-1)),x(s($),{href:s(g)("expenses.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[27]||(e[27]=[t("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Retour à la liste ",-1)])]),_:1},8,["href"])]),t("form",null,[t("div",h,[e[38]||(e[38]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-info-circle me-2"}),c(" Informations générales ")])],-1)),t("div",N,[t("div",T,[t("div",j,[e[29]||(e[29]=t("label",{for:"title",class:"form-label"},[c(" Titre de la dépense "),t("span",{class:"text-danger"},"*")],-1)),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(i).title=o),type:"text",class:b(["form-control",{"is-invalid":s(a).title||n.value.title}]),id:"title",placeholder:"Ex: Achat de fournitures de bureau",onInput:e[1]||(e[1]=o=>p("title")),onBlur:e[2]||(e[2]=o=>p("title"))},null,34),[[y,s(i).title]]),s(a).title?(r(),d("div",z,u(s(a).title),1)):m("",!0),n.value.title?(r(),d("div",O,u(n.value.title),1)):m("",!0)]),t("div",R,[e[31]||(e[31]=t("label",{for:"amount",class:"form-label"},[c(" Montant "),t("span",{class:"text-danger"},"*")],-1)),t("div",W,[f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(i).amount=o),type:"number",step:"0.01",min:"0",class:b(["form-control",{"is-invalid":s(a).amount||n.value.amount}]),id:"amount",placeholder:"0.00",onInput:e[4]||(e[4]=o=>p("amount")),onBlur:e[5]||(e[5]=o=>p("amount"))},null,34),[[y,s(i).amount]]),e[30]||(e[30]=t("span",{class:"input-group-text"},"Fcfa",-1))]),s(a).amount?(r(),d("div",G,u(s(a).amount),1)):m("",!0),n.value.amount?(r(),d("div",H,u(n.value.amount),1)):m("",!0)])]),t("div",J,[t("div",K,[e[33]||(e[33]=t("label",{for:"category",class:"form-label"},[c(" Catégorie "),t("span",{class:"text-danger"},"*")],-1)),f(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s(i).category=o),class:b(["form-select",{"is-invalid":s(a).category||n.value.category}]),id:"category",onChange:e[7]||(e[7]=o=>p("category")),onBlur:e[8]||(e[8]=o=>p("category"))},[...e[32]||(e[32]=[t("option",{value:""},"Sélectionner une catégorie",-1),t("option",{value:"fournitures"},"Fournitures",-1),t("option",{value:"equipement"},"Équipement",-1),t("option",{value:"marketing"},"Marketing",-1),t("option",{value:"transport"},"Transport",-1),t("option",{value:"formation"},"Formation",-1),t("option",{value:"maintenance"},"Maintenance",-1),t("option",{value:"utilities"},"Services publics",-1),t("option",{value:"autres"},"Autres",-1)])],34),[[w,s(i).category]]),s(a).category?(r(),d("div",P,u(s(a).category),1)):m("",!0),n.value.category?(r(),d("div",Q,u(n.value.category),1)):m("",!0)]),t("div",X,[e[35]||(e[35]=t("label",{for:"payment_method",class:"form-label"},[c(" Méthode de paiement "),t("span",{class:"text-danger"},"*")],-1)),f(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>s(i).payment_method=o),class:b(["form-select",{"is-invalid":s(a).payment_method||n.value.payment_method}]),id:"payment_method",onChange:e[10]||(e[10]=o=>p("payment_method")),onBlur:e[11]||(e[11]=o=>p("payment_method"))},[...e[34]||(e[34]=[t("option",{value:""},"Sélectionner une méthode",-1),t("option",{value:"cash"},"Espèces",-1),t("option",{value:"bank_transfer"},"Virement bancaire",-1),t("option",{value:"credit_card"},"Carte de crédit",-1),t("option",{value:"mobile_money"},"Mobile Money",-1),t("option",{value:"orange_money"},"Orange Money",-1),t("option",{value:"wave"},"Wave",-1),t("option",{value:"check"},"Chèque",-1)])],34),[[w,s(i).payment_method]]),s(a).payment_method?(r(),d("div",Y,u(s(a).payment_method),1)):m("",!0),n.value.payment_method?(r(),d("div",Z,u(n.value.payment_method),1)):m("",!0)])]),t("div",ee,[t("div",te,[e[36]||(e[36]=t("label",{for:"expense_date",class:"form-label"},[c(" Date de la dépense "),t("span",{class:"text-danger"},"*")],-1)),f(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s(i).expense_date=o),type:"date",class:b(["form-control",{"is-invalid":s(a).expense_date||n.value.expense_date}]),id:"expense_date",onChange:e[13]||(e[13]=o=>p("expense_date")),onBlur:e[14]||(e[14]=o=>p("expense_date"))},null,34),[[y,s(i).expense_date]]),s(a).expense_date?(r(),d("div",se,u(s(a).expense_date),1)):m("",!0),n.value.expense_date?(r(),d("div",oe,u(n.value.expense_date),1)):m("",!0)]),t("div",ne,[e[37]||(e[37]=t("label",{for:"vendor",class:"form-label"},"Fournisseur",-1)),f(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>s(i).vendor=o),type:"text",class:b(["form-control",{"is-invalid":s(a).vendor||n.value.vendor}]),id:"vendor",placeholder:"Ex: Magasin ABC",onInput:e[16]||(e[16]=o=>p("vendor")),onBlur:e[17]||(e[17]=o=>p("vendor"))},null,34),[[y,s(i).vendor]]),s(a).vendor?(r(),d("div",ie,u(s(a).vendor),1)):m("",!0),n.value.vendor?(r(),d("div",ae,u(n.value.vendor),1)):m("",!0)])])])]),t("div",le,[e[42]||(e[42]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-file-text me-2"}),c(" Détails supplémentaires ")])],-1)),t("div",re,[t("div",de,[t("div",ue,[e[39]||(e[39]=t("label",{for:"receipt_number",class:"form-label"},"Numéro de reçu/facture",-1)),f(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s(i).receipt_number=o),type:"text",class:b(["form-control",{"is-invalid":s(a).receipt_number||n.value.receipt_number}]),id:"receipt_number",placeholder:"Ex: FAC-2025-001",onInput:e[19]||(e[19]=o=>p("receipt_number")),onBlur:e[20]||(e[20]=o=>p("receipt_number"))},null,34),[[y,s(i).receipt_number]]),s(a).receipt_number?(r(),d("div",pe,u(s(a).receipt_number),1)):m("",!0),n.value.receipt_number?(r(),d("div",me,u(n.value.receipt_number),1)):m("",!0)])]),t("div",ve,[t("div",ce,[e[40]||(e[40]=t("label",{for:"description",class:"form-label"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=o=>s(i).description=o),class:b(["form-control",{"is-invalid":s(a).description||n.value.description}]),id:"description",rows:"3",placeholder:"Description détaillée de la dépense...",onInput:e[22]||(e[22]=o=>p("description")),onBlur:e[23]||(e[23]=o=>p("description"))},null,34),[[y,s(i).description]]),s(a).description?(r(),d("div",fe,u(s(a).description),1)):m("",!0),n.value.description?(r(),d("div",be,u(n.value.description),1)):m("",!0)])]),t("div",ye,[t("div",_e,[e[41]||(e[41]=t("label",{for:"notes",class:"form-label"},"Notes",-1)),f(t("textarea",{"onUpdate:modelValue":e[24]||(e[24]=o=>s(i).notes=o),class:b(["form-control",{"is-invalid":s(a).notes||n.value.notes}]),id:"notes",rows:"2",placeholder:"Notes additionnelles...",onInput:e[25]||(e[25]=o=>p("notes")),onBlur:e[26]||(e[26]=o=>p("notes"))},null,34),[[y,s(i).notes]]),s(a).notes?(r(),d("div",ke,u(s(a).notes),1)):m("",!0),n.value.notes?(r(),d("div",ge,u(n.value.notes),1)):m("",!0)])])])]),t("div",xe,[e[44]||(e[44]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Actions")],-1)),t("div",$e,[t("div",we,[t("button",{type:"button",onClick:V,class:"btn btn-primary",disabled:s(_)},[s(_)?(r(),d("span",qe)):(r(),d("i",Be)),c(" "+u(s(_)?"Création...":"Créer la dépense"),1)],8,Ce),x(s($),{href:s(g)("expenses.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[43]||(e[43]=[c(" Annuler ",-1)])]),_:1},8,["href"])])])])])]),_:1}))}}),Se=A(Ve,[["__scopeId","data-v-ee8427b4"]]);export{Se as default};
