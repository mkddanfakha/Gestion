import{d as N,r as A,i as E,c as I,w as k,a as t,t as d,j as g,u as e,l as $,f as y,m as c,b as r,e as u,n as v,v as b,o as a,p as M}from"./app-DarICuOq.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-Fcs-c9_i.js";import{r as _}from"./routes-C8N3XD_S.js";import{u as S}from"./useSweetAlert-CjcY7Pj8.js";import"./BootstrapLayout-BQuuXWrC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const j={class:"d-flex justify-content-between align-items-center mb-4"},q={class:"text-muted mb-0"},F={class:"d-flex gap-2"},T={class:"row justify-content-center"},D={class:"col-lg-8"},L={class:"card mb-4"},P={class:"card-body"},z={class:"row g-3"},O={class:"col-md-6"},R={key:0,class:"invalid-feedback"},G={key:1,class:"invalid-feedback"},H={class:"col-md-6"},J={key:0,class:"invalid-feedback"},K={key:1,class:"invalid-feedback"},Q={class:"col-md-6"},W={key:0,class:"invalid-feedback"},X={key:1,class:"invalid-feedback"},Y={class:"col-md-6"},Z={key:0,class:"invalid-feedback"},ss={key:1,class:"invalid-feedback"},es={class:"col-md-6"},ts={key:0,class:"invalid-feedback"},ls={key:1,class:"invalid-feedback"},is={class:"col-md-6"},os={key:0,class:"invalid-feedback"},ns={class:"card mb-4"},as={class:"card-body"},ds={class:"row g-3"},rs={class:"col-12"},us={key:0,class:"invalid-feedback"},ms={class:"col-md-6"},ps={key:0,class:"invalid-feedback"},cs={class:"col-md-6"},vs={key:0,class:"invalid-feedback"},bs={class:"card mb-4"},fs={class:"card-body"},ys={class:"row g-3"},ks={class:"col-12"},_s={key:0,class:"invalid-feedback"},xs={class:"col-12"},Vs={key:0,class:"invalid-feedback"},gs={class:"d-flex gap-2"},$s=["disabled"],ws={key:0,class:"spinner-border spinner-border-sm me-2"},Us={key:1,class:"bi bi-check-circle me-1"},Cs=N({__name:"Edit",props:{supplier:{}},setup(x){const p=x,{success:w,error:U}=S(),n=A({}),h=()=>{const m={};return(!l.name||l.name.trim().length<2)&&(m.name="Le nom du fournisseur est requis (minimum 2 caractères)"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(m.email="Adresse email invalide"),l.phone&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(l.phone)&&(m.phone="Numéro de téléphone invalide"),l.mobile&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(l.mobile)&&(m.mobile="Numéro de mobile invalide"),Object.keys(m).length===0?null:m},f=(m,s)=>{n.value[m]&&delete n.value[m];let i="";switch(m){case"name":(!s||s.trim().length<2)&&(i="Le nom du fournisseur est requis (minimum 2 caractères)");break;case"email":s&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)&&(i="Adresse email invalide");break;case"phone":s&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(s)&&(i="Numéro de téléphone invalide");break;case"mobile":s&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(s)&&(i="Numéro de mobile invalide");break}i&&(n.value[m]=i)},l=E({name:p.supplier.name,contact_person:p.supplier.contact_person||"",email:p.supplier.email||"",phone:p.supplier.phone||"",mobile:p.supplier.mobile||"",address:p.supplier.address||"",city:p.supplier.city||"",country:p.supplier.country||"",tax_id:p.supplier.tax_id||"",notes:p.supplier.notes||"",status:p.supplier.status}),B=()=>{n.value={};const m=h();if(m){n.value=m;return}l.put(_("suppliers.update",{id:p.supplier.id}),{onSuccess:()=>{w("Fournisseur modifié avec succès !"),n.value={}},onError:()=>{U("Erreur lors de la modification du fournisseur.")}})},{errors:o,processing:V}=l;return(m,s)=>(a(),I(C,null,{default:k(()=>[t("div",j,[t("div",null,[s[20]||(s[20]=t("h1",{class:"h2 mb-1"},"Modifier le fournisseur",-1)),t("p",q,d(x.supplier.name),1)]),t("div",F,[g(e($),{href:e(_)("suppliers.show",{id:x.supplier.id}),class:"btn btn-outline-primary"},{default:k(()=>[...s[21]||(s[21]=[t("i",{class:"bi bi-eye me-1"},null,-1),y(" Voir le fournisseur ",-1)])]),_:1},8,["href"]),g(e($),{href:e(_)("suppliers.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...s[22]||(s[22]=[t("i",{class:"bi bi-arrow-left me-1"},null,-1),y(" Retour à la liste ",-1)])]),_:1},8,["href"])])]),t("form",null,[t("div",T,[t("div",D,[t("div",L,[s[29]||(s[29]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Informations générales")],-1)),t("div",P,[t("div",z,[t("div",O,[s[23]||(s[23]=t("label",{class:"form-label"},[y(" Nom du fournisseur "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>e(l).name=i),type:"text",required:"",class:v(["form-control",{"is-invalid":e(o).name||n.value.name}]),onBlur:s[1]||(s[1]=i=>f("name",e(l).name)),onInput:s[2]||(s[2]=i=>f("name",e(l).name))},null,34),[[b,e(l).name]]),e(o).name?(a(),r("div",R,d(e(o).name),1)):u("",!0),n.value.name?(a(),r("div",G,d(n.value.name),1)):u("",!0)]),t("div",H,[s[24]||(s[24]=t("label",{class:"form-label"},"Personne de contact",-1)),c(t("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>e(l).contact_person=i),type:"text",class:v(["form-control",{"is-invalid":e(o).contact_person||n.value.contact_person}]),onBlur:s[4]||(s[4]=i=>f("contact_person",e(l).contact_person))},null,34),[[b,e(l).contact_person]]),e(o).contact_person?(a(),r("div",J,d(e(o).contact_person),1)):u("",!0),n.value.contact_person?(a(),r("div",K,d(n.value.contact_person),1)):u("",!0)]),t("div",Q,[s[25]||(s[25]=t("label",{class:"form-label"},"Email",-1)),c(t("input",{"onUpdate:modelValue":s[5]||(s[5]=i=>e(l).email=i),type:"email",class:v(["form-control",{"is-invalid":e(o).email||n.value.email}]),onBlur:s[6]||(s[6]=i=>f("email",e(l).email)),onInput:s[7]||(s[7]=i=>f("email",e(l).email))},null,34),[[b,e(l).email]]),e(o).email?(a(),r("div",W,d(e(o).email),1)):u("",!0),n.value.email?(a(),r("div",X,d(n.value.email),1)):u("",!0)]),t("div",Y,[s[26]||(s[26]=t("label",{class:"form-label"},"Téléphone",-1)),c(t("input",{"onUpdate:modelValue":s[8]||(s[8]=i=>e(l).phone=i),type:"tel",class:v(["form-control",{"is-invalid":e(o).phone||n.value.phone}]),onBlur:s[9]||(s[9]=i=>f("phone",e(l).phone)),onInput:s[10]||(s[10]=i=>f("phone",e(l).phone))},null,34),[[b,e(l).phone]]),e(o).phone?(a(),r("div",Z,d(e(o).phone),1)):u("",!0),n.value.phone?(a(),r("div",ss,d(n.value.phone),1)):u("",!0)]),t("div",es,[s[27]||(s[27]=t("label",{class:"form-label"},"Mobile",-1)),c(t("input",{"onUpdate:modelValue":s[11]||(s[11]=i=>e(l).mobile=i),type:"tel",class:v(["form-control",{"is-invalid":e(o).mobile||n.value.mobile}]),onBlur:s[12]||(s[12]=i=>f("mobile",e(l).mobile)),onInput:s[13]||(s[13]=i=>f("mobile",e(l).mobile))},null,34),[[b,e(l).mobile]]),e(o).mobile?(a(),r("div",ts,d(e(o).mobile),1)):u("",!0),n.value.mobile?(a(),r("div",ls,d(n.value.mobile),1)):u("",!0)]),t("div",is,[s[28]||(s[28]=t("label",{class:"form-label"},"Numéro d'identification fiscale",-1)),c(t("input",{"onUpdate:modelValue":s[14]||(s[14]=i=>e(l).tax_id=i),type:"text",class:v(["form-control",{"is-invalid":e(o).tax_id}])},null,2),[[b,e(l).tax_id]]),e(o).tax_id?(a(),r("div",os,d(e(o).tax_id),1)):u("",!0)])])])]),t("div",ns,[s[33]||(s[33]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Adresse")],-1)),t("div",as,[t("div",ds,[t("div",rs,[s[30]||(s[30]=t("label",{class:"form-label"},"Adresse",-1)),c(t("textarea",{"onUpdate:modelValue":s[15]||(s[15]=i=>e(l).address=i),rows:"3",class:v(["form-control",{"is-invalid":e(o).address}])},null,2),[[b,e(l).address]]),e(o).address?(a(),r("div",us,d(e(o).address),1)):u("",!0)]),t("div",ms,[s[31]||(s[31]=t("label",{class:"form-label"},"Ville",-1)),c(t("input",{"onUpdate:modelValue":s[16]||(s[16]=i=>e(l).city=i),type:"text",class:v(["form-control",{"is-invalid":e(o).city}])},null,2),[[b,e(l).city]]),e(o).city?(a(),r("div",ps,d(e(o).city),1)):u("",!0)]),t("div",cs,[s[32]||(s[32]=t("label",{class:"form-label"},"Pays",-1)),c(t("input",{"onUpdate:modelValue":s[17]||(s[17]=i=>e(l).country=i),type:"text",class:v(["form-control",{"is-invalid":e(o).country}])},null,2),[[b,e(l).country]]),e(o).country?(a(),r("div",vs,d(e(o).country),1)):u("",!0)])])])]),t("div",bs,[s[38]||(s[38]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Informations supplémentaires")],-1)),t("div",fs,[t("div",ys,[t("div",ks,[s[34]||(s[34]=t("label",{class:"form-label"},"Notes",-1)),c(t("textarea",{"onUpdate:modelValue":s[18]||(s[18]=i=>e(l).notes=i),rows:"3",class:v(["form-control",{"is-invalid":e(o).notes}])},null,2),[[b,e(l).notes]]),e(o).notes?(a(),r("div",_s,d(e(o).notes),1)):u("",!0)]),t("div",xs,[s[36]||(s[36]=t("label",{class:"form-label"},[y(" Statut "),t("span",{class:"text-danger"},"*")],-1)),c(t("select",{"onUpdate:modelValue":s[19]||(s[19]=i=>e(l).status=i),class:v(["form-select",{"is-invalid":e(o).status}]),required:""},[...s[35]||(s[35]=[t("option",{value:"active"},"Actif",-1),t("option",{value:"inactive"},"Inactif",-1)])],2),[[M,e(l).status]]),e(o).status?(a(),r("div",Vs,d(e(o).status),1)):u("",!0),s[37]||(s[37]=t("div",{class:"form-text"}," Un fournisseur inactif ne sera pas visible dans les listes ",-1))])])])]),t("div",gs,[t("button",{type:"button",onClick:B,class:"btn btn-primary",disabled:e(V)},[e(V)?(a(),r("span",ws)):(a(),r("i",Us)),y(" "+d(e(V)?"Modification...":"Modifier le fournisseur"),1)],8,$s),g(e($),{href:e(_)("suppliers.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...s[39]||(s[39]=[y(" Annuler ",-1)])]),_:1},8,["href"])])])])])]),_:1}))}});export{Cs as default};
