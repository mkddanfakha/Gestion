import{d as _t,r as P,i as ft,y as w,B as T,c as bt,w as $,a as e,j as L,u as a,l as J,f as F,b as u,e as m,o as l,t as d,m as p,n as q,p as yt,v as x,F as xt,g as gt,s as K,L as j}from"./app-BrkohfQq.js";import{_ as kt}from"./AppLayout.vue_vue_type_script_setup_true_lang-ClsnqJJt.js";import{r as R}from"./routes-C8N3XD_S.js";import{u as wt}from"./useSweetAlert-CjcY7Pj8.js";import{P as ht}from"./ProductAutocomplete-CMHAZpms.js";import{C as Vt}from"./CustomerAutocomplete-C8DbV90l.js";import{_ as qt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BootstrapLayout-DdWhaGDh.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const Ft={class:"d-flex justify-content-between align-items-center mb-4"},At={class:"row"},Pt={class:"col-lg-8"},Ct={class:"card mb-4"},Ut={class:"card-body"},St={class:"row g-3"},Mt={class:"col-md-6"},It={key:0,class:"invalid-feedback d-block"},Lt={class:"col-md-6"},jt={key:0,class:"invalid-feedback"},Et={key:1,class:"invalid-feedback"},Dt={class:"col-md-6"},Wt=["min"],Tt={key:0,class:"invalid-feedback"},$t={class:"mt-3"},Rt={key:0,class:"invalid-feedback"},zt={class:"card mb-4"},Nt={class:"card-header d-flex justify-content-between align-items-center"},Bt={class:"d-flex gap-2"},Ot={class:"card-body"},Qt={key:0,class:"text-center py-4 text-muted"},Gt={key:1},Ht={class:"row g-3"},Jt={class:"col-md-4"},Kt={key:0,class:"invalid-feedback d-block"},Xt={class:"col-md-2"},Yt=["onUpdate:modelValue","max","onInput"],Zt={key:0,class:"invalid-feedback"},te={key:1,class:"form-text text-muted"},ee={class:"col-md-2"},ne={class:"input-group"},oe=["onUpdate:modelValue","onInput"],se={class:"col-md-2"},ae={class:"input-group"},le=["onUpdate:modelValue"],ue={class:"col-md-2 d-flex align-items-end"},ie=["onClick"],de={class:"col-lg-4"},re={class:"card"},me={class:"card-body"},ce={class:"d-flex justify-content-between mb-2"},pe={class:"fw-medium"},ve={class:"d-flex justify-content-between mb-2"},_e={class:"fw-medium"},fe={class:"mb-3"},be={class:"btn-group w-100 mb-2",role:"group"},ye={key:0,class:"input-group"},xe={key:1,class:"input-group"},ge={key:2,class:"small text-muted mt-1"},ke={key:3,class:"invalid-feedback"},we={key:4,class:"invalid-feedback"},he={class:"mb-3"},Ve={class:"btn-group w-100 mb-2",role:"group"},qe={key:0,class:"input-group"},Fe={key:1,class:"input-group"},Ae={key:2,class:"small text-muted mt-1"},Pe={key:3,class:"invalid-feedback"},Ce={key:4,class:"invalid-feedback"},Ue={class:"mb-3"},Se={class:"input-group"},Me=["max"],Ie={key:0,class:"invalid-feedback"},Le={key:1,class:"invalid-feedback"},je={class:"form-text text-muted"},Ee={key:0,class:"mb-3"},De={class:"input-group"},We=["disabled"],Te={key:0,class:"invalid-feedback d-block"},$e={key:1,class:"form-text text-muted"},Re={key:2,class:"form-text text-muted"},ze={class:"d-flex justify-content-between mb-2"},Ne={class:"fw-bold text-success fs-5"},Be={key:1,class:"d-flex justify-content-between mb-2"},Oe={class:"fw-medium text-primary"},Qe={key:2,class:"d-flex justify-content-between mb-2"},Ge={class:"fw-bold text-warning fs-5"},He={key:3,class:"d-flex justify-content-between mb-3 p-2 bg-light rounded"},Je={class:"fw-bold text-info fs-5"},Ke={class:"d-grid gap-2"},Xe=["disabled"],Ye={key:0,class:"spinner-border spinner-border-sm me-2"},Ze={key:1,class:"bi bi-check-circle me-1"},tn=_t({__name:"Create",props:{customers:{},products:{}},setup(E){const z=E,{success:X,error:C}=wt(),c=P({}),v=P("amount"),_=P("amount"),h=P(0),V=P(0),g=P(0),n=ft({customer_id:"",payment_method:"",notes:"",due_date:"",tax_amount:0,discount_amount:0,down_payment_amount:0,items:[]}),Y=()=>{n.items.push({product_id:0,quantity:1,unit_price:0,total_price:0})},Z=s=>{n.items.splice(s,1)},tt=(s,t)=>{const o=n.items[t];o.product_id=s.id,o.unit_price=s.price,D(t)},et=s=>n.items.map((t,o)=>o!==s?t.product_id:null).filter(t=>t!==null&&t>0),D=s=>{const t=n.items[s];t.total_price=t.quantity*t.unit_price},nt=(s,t)=>s?n.items.some((o,i)=>i!==t&&o.product_id===s):!1,N=s=>{const t=n.items[s];return t.product_id?nt(t.product_id,s):!1},ot=w(()=>{const s=n.items.map(t=>t.product_id).filter(t=>t>0);return s.length!==new Set(s).size}),st=()=>{const s=new Map;n.items.forEach(t=>{if(t.product_id>0)if(s.has(t.product_id)){const o=s.get(t.product_id);o.quantity+=t.quantity,o.total_price=o.quantity*o.unit_price}else s.set(t.product_id,{...t})}),n.items=Array.from(s.values())},U=s=>{const t=n.items[s];if(!t.product_id||!t.quantity)return!1;const o=S(s);return t.quantity>o},S=s=>{const t=n.items[s];if(!t.product_id)return 0;const o=z.products.find(i=>i.id===t.product_id);return o?o.stock_quantity:0},B=s=>{const t=n.items[s];if(!t.product_id)return"";const o=z.products.find(i=>i.id===t.product_id);return o?o.unit:""},at=s=>S(s),O=s=>{if(!s||s===0||typeof s!="number"||isNaN(s))return"80px";const vt=70+s.toFixed(2).length*9;return`${Math.max(70,Math.min(130,vt))}px`},k=s=>new Intl.NumberFormat("fr-FR").format(s)+" Fcfa",lt=w(()=>n.items.length),y=w(()=>n.items.reduce((s,t)=>s+t.total_price,0)),Q=w(()=>v.value==="percent"&&h.value>0?y.value*h.value/100:n.tax_amount||0),G=w(()=>_.value==="percent"&&V.value>0?y.value*V.value/100:n.discount_amount||0),M=()=>{v.value==="percent"&&h.value>0?n.tax_amount=y.value*h.value/100:v.value==="percent"&&(n.tax_amount=0)},I=()=>{_.value==="percent"&&V.value>0?n.discount_amount=y.value*V.value/100:_.value==="percent"&&(n.discount_amount=0)},ut=()=>{v.value==="amount"&&y.value>0&&n.tax_amount>0?h.value=n.tax_amount/y.value*100:v.value==="amount"&&(h.value=0)},it=()=>{_.value==="amount"&&y.value>0&&n.discount_amount>0?V.value=n.discount_amount/y.value*100:_.value==="amount"&&(V.value=0)};T(v,s=>{s==="percent"?M():ut()}),T(_,s=>{s==="percent"?I():it()}),T(y,()=>{v.value==="percent"&&M(),_.value==="percent"&&I()});const dt=w(()=>v.value==="percent"?Q.value:n.tax_amount||0),rt=w(()=>_.value==="percent"?G.value:n.discount_amount||0),b=w(()=>y.value+dt.value-rt.value),A=w(()=>b.value-(n.down_payment_amount||0)),mt=w(()=>{if(n.payment_method==="cash"){const s=n.down_payment_amount>0?A.value:b.value;if(g.value>=s)return g.value-s}return 0}),ct=()=>{const s={};return n.payment_method||(s.payment_method="Le mode de paiement est requis"),n.tax_amount<0&&(s.tax_amount="Le montant de la taxe ne peut pas être négatif"),n.discount_amount<0&&(s.discount_amount="Le montant de la remise ne peut pas être négatif"),n.down_payment_amount<0&&(s.down_payment_amount="L'acompte ne peut pas être négatif"),n.down_payment_amount>b.value&&(s.down_payment_amount="L'acompte ne peut pas dépasser le montant total"),n.items.forEach((t,o)=>{t.product_id||(s[`items.${o}.product_id`]="Le produit est requis"),(!t.quantity||t.quantity<1)&&(s[`items.${o}.quantity`]="La quantité doit être au moins 1"),(!t.unit_price||t.unit_price<0)&&(s[`items.${o}.unit_price`]="Le prix unitaire doit être positif"),U(o)&&(s[`items.${o}.quantity`]="La quantité dépasse le stock disponible")}),Object.keys(s).length===0?null:s},H=(s,t)=>{c.value[s]&&delete c.value[s];let o="";switch(s){case"payment_method":t||(o="Le mode de paiement est requis");break;case"tax_amount":t<0&&(o="Le montant de la taxe ne peut pas être négatif");break;case"discount_amount":t<0&&(o="Le montant de la remise ne peut pas être négatif");break;case"down_payment_amount":t<0?o="L'acompte ne peut pas être négatif":t>b.value&&(o="L'acompte ne peut pas dépasser le montant total");break}o&&(c.value[s]=o)},pt=()=>{c.value={},v.value==="percent"&&M(),_.value==="percent"&&I();const s=ct();if(s){c.value=s;return}if(n.items.length===0){C("Veuillez ajouter au moins un article.");return}if(n.payment_method==="cash"&&g.value>0){const i=n.down_payment_amount>0?A.value:b.value;if(g.value<i){C(`Le montant reçu doit être au moins égal à ${n.down_payment_amount>0?"le reste à payer":"le montant total"}.`);return}}if(n.items.some((i,f)=>U(f))){C("Veuillez corriger les quantités qui dépassent le stock disponible.");return}const o={customer_id:n.customer_id||null,payment_method:n.payment_method,notes:n.notes||null,tax_amount:n.tax_amount||0,discount_amount:n.discount_amount||0,down_payment_amount:n.down_payment_amount||0,items:n.items.map(i=>({product_id:i.product_id,quantity:i.quantity,unit_price:i.unit_price}))};n.transform(()=>o).post(R("sales.store"),{onSuccess:()=>{X("Vente enregistrée avec succès !"),n.reset(),c.value={}},onError:i=>{console.error("Erreurs de validation:",i),C("Erreur lors de l'enregistrement de la vente.")}})},{errors:r,processing:W}=n;return(s,t)=>(l(),bt(kt,null,{default:$(()=>[e("div",Ft,[t[17]||(t[17]=e("div",null,[e("h1",{class:"h2 mb-1"},"Nouvelle vente"),e("p",{class:"text-muted mb-0"},"Enregistrez une nouvelle vente")],-1)),L(a(J),{href:a(R)("sales.index"),class:"btn btn-outline-secondary"},{default:$(()=>[...t[16]||(t[16]=[e("i",{class:"bi bi-arrow-left me-1"},null,-1),F(" Retour à la liste ",-1)])]),_:1},8,["href"])]),e("form",null,[e("div",At,[e("div",Pt,[e("div",Ct,[t[24]||(t[24]=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Informations générales")],-1)),e("div",Ut,[e("div",St,[e("div",Mt,[t[18]||(t[18]=e("label",{class:"form-label"},"Client",-1)),L(Vt,{customers:E.customers,modelValue:a(n).customer_id,"onUpdate:modelValue":t[0]||(t[0]=o=>a(n).customer_id=o),placeholder:"Rechercher un client (optionnel)...","is-invalid":!!a(r).customer_id},null,8,["customers","modelValue","is-invalid"]),a(r).customer_id?(l(),u("div",It,d(a(r).customer_id),1)):m("",!0)]),e("div",Lt,[t[20]||(t[20]=e("label",{class:"form-label"},[F(" Mode de paiement "),e("span",{class:"text-danger"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a(n).payment_method=o),required:"",class:q(["form-select",{"is-invalid":a(r).payment_method||c.value.payment_method}]),onBlur:t[2]||(t[2]=o=>H("payment_method",a(n).payment_method)),onChange:t[3]||(t[3]=o=>H("payment_method",a(n).payment_method))},[...t[19]||(t[19]=[e("option",{value:""},"Sélectionner un mode de paiement",-1),e("option",{value:"cash"},"Espèces",-1),e("option",{value:"card"},"Carte",-1),e("option",{value:"bank_transfer"},"Virement bancaire",-1),e("option",{value:"check"},"Chèque",-1),e("option",{value:"orange_money"},"Orange Money",-1),e("option",{value:"wave"},"Wave",-1)])],34),[[yt,a(n).payment_method]]),a(r).payment_method?(l(),u("div",jt,d(a(r).payment_method),1)):m("",!0),c.value.payment_method?(l(),u("div",Et,d(c.value.payment_method),1)):m("",!0)]),e("div",Dt,[t[21]||(t[21]=e("label",{class:"form-label"},"Date d'échéance (optionnel)",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>a(n).due_date=o),type:"date",class:q(["form-control",{"is-invalid":a(r).due_date}]),min:new Date().toISOString().split("T")[0]},null,10,Wt),[[x,a(n).due_date]]),a(r).due_date?(l(),u("div",Tt,d(a(r).due_date),1)):m("",!0),t[22]||(t[22]=e("small",{class:"form-text text-muted"},"Date limite de paiement",-1))])]),e("div",$t,[t[23]||(t[23]=e("label",{class:"form-label"},"Notes (optionnel)",-1)),p(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>a(n).notes=o),rows:"3",class:q(["form-control",{"is-invalid":a(r).notes}]),placeholder:"Ajoutez des notes sur cette vente..."},null,2),[[x,a(n).notes]]),a(r).notes?(l(),u("div",Rt,d(a(r).notes),1)):m("",!0)])])]),e("div",zt,[e("div",Nt,[t[27]||(t[27]=e("h5",{class:"card-title mb-0"},"Articles",-1)),e("div",Bt,[ot.value?(l(),u("button",{key:0,type:"button",onClick:st,class:"btn btn-warning btn-sm"},[...t[25]||(t[25]=[e("i",{class:"bi bi-arrow-down-up me-1"},null,-1),F(" Fusionner les doublons ",-1)])])):m("",!0),e("button",{type:"button",onClick:Y,class:"btn btn-primary btn-sm"},[...t[26]||(t[26]=[e("i",{class:"bi bi-plus-circle me-1"},null,-1),F(" Ajouter un article ",-1)])])])]),e("div",Ot,[a(n).items.length===0?(l(),u("div",Qt,[...t[28]||(t[28]=[e("i",{class:"bi bi-cart-x fs-1 mb-3"},null,-1),e("p",null,'Aucun article ajouté. Cliquez sur "Ajouter un article" pour commencer.',-1)])])):(l(),u("div",Gt,[(l(!0),u(xt,null,gt(a(n).items,(o,i)=>(l(),u("div",{key:i,class:"border rounded p-3 mb-3"},[e("div",Ht,[e("div",Jt,[t[29]||(t[29]=e("label",{class:"form-label"},[F(" Produit "),e("span",{class:"text-danger"},"*")],-1)),L(ht,{modelValue:o.product_id,"onUpdate:modelValue":f=>o.product_id=f,products:E.products,"exclude-product-ids":et(i),"is-invalid":N(i),placeholder:"Rechercher un produit...",onSelected:f=>tt(f,i)},null,8,["modelValue","onUpdate:modelValue","products","exclude-product-ids","is-invalid","onSelected"]),N(i)?(l(),u("div",Kt," Ce produit est déjà sélectionné dans cette vente. ")):m("",!0)]),e("div",Xt,[t[30]||(t[30]=e("label",{class:"form-label"},[F(" Quantité "),e("span",{class:"text-danger"},"*")],-1)),p(e("input",{"onUpdate:modelValue":f=>o.quantity=f,type:"number",min:"1",max:at(i),required:"",class:q(["form-control",{"is-invalid":U(i)}]),onInput:f=>D(i)},null,42,Yt),[[x,o.quantity,void 0,{number:!0}]]),U(i)?(l(),u("div",Zt," Stock insuffisant. Disponible: "+d(S(i))+" "+d(B(i)),1)):o.product_id?(l(),u("div",te," Stock disponible: "+d(S(i))+" "+d(B(i)),1)):m("",!0)]),e("div",ee,[t[32]||(t[32]=e("label",{class:"form-label"},"Prix unitaire",-1)),e("div",ne,[p(e("input",{"onUpdate:modelValue":f=>o.unit_price=f,type:"number",step:"0.01",min:"0",class:q(["form-control",{"is-invalid":!1}]),style:K({width:O(o.unit_price)}),onInput:f=>D(i)},null,44,oe),[[x,o.unit_price,void 0,{number:!0}]]),t[31]||(t[31]=e("span",{class:"input-group-text"},"Fcfa",-1))])]),e("div",se,[t[34]||(t[34]=e("label",{class:"form-label"},"Total",-1)),e("div",ae,[p(e("input",{"onUpdate:modelValue":f=>o.total_price=f,type:"number",step:"0.01",readonly:"",class:"form-control",style:K({width:O(o.total_price)})},null,12,le),[[x,o.total_price,void 0,{number:!0}]]),t[33]||(t[33]=e("span",{class:"input-group-text"},"Fcfa",-1))])]),e("div",ue,[e("button",{type:"button",onClick:f=>Z(i),class:"btn btn-outline-danger w-100"},[...t[35]||(t[35]=[e("i",{class:"bi bi-trash"},null,-1)])],8,ie)])])]))),128))]))])])]),e("div",de,[e("div",re,[t[58]||(t[58]=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Résumé de la vente")],-1)),e("div",me,[e("div",ce,[t[36]||(t[36]=e("span",null,"Nombre d'articles:",-1)),e("span",pe,d(lt.value),1)]),e("div",ve,[t[37]||(t[37]=e("span",null,"Sous-total:",-1)),e("span",_e,d(k(y.value)),1)]),e("div",fe,[t[42]||(t[42]=e("label",{class:"form-label"},"Taxes",-1)),e("div",be,[p(e("input",{type:"radio",class:"btn-check",id:"tax-mode-amount",value:"amount","onUpdate:modelValue":t[6]||(t[6]=o=>v.value=o)},null,512),[[j,v.value]]),t[38]||(t[38]=e("label",{class:"btn btn-outline-primary",for:"tax-mode-amount"},"Montant (Fcfa)",-1)),p(e("input",{type:"radio",class:"btn-check",id:"tax-mode-percent",value:"percent","onUpdate:modelValue":t[7]||(t[7]=o=>v.value=o)},null,512),[[j,v.value]]),t[39]||(t[39]=e("label",{class:"btn btn-outline-primary",for:"tax-mode-percent"},"Pourcentage (%)",-1))]),v.value==="amount"?(l(),u("div",ye,[p(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=o=>a(n).tax_amount=o),step:"0.01",min:"0",class:q(["form-control",{"is-invalid":a(r).tax_amount||c.value.tax_amount}]),placeholder:"0.00"},null,2),[[x,a(n).tax_amount,void 0,{number:!0}]]),t[40]||(t[40]=e("span",{class:"input-group-text"},"Fcfa",-1))])):(l(),u("div",xe,[p(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=o=>h.value=o),step:"0.01",min:"0",max:"100",class:"form-control",placeholder:"0.00",onInput:M},null,544),[[x,h.value,void 0,{number:!0}]]),t[41]||(t[41]=e("span",{class:"input-group-text"},"%",-1))])),v.value==="percent"&&h.value>0?(l(),u("div",ge," = "+d(k(Q.value)),1)):m("",!0),a(r).tax_amount?(l(),u("div",ke,d(a(r).tax_amount),1)):m("",!0),c.value.tax_amount?(l(),u("div",we,d(c.value.tax_amount),1)):m("",!0)]),e("div",he,[t[47]||(t[47]=e("label",{class:"form-label"},"Remise",-1)),e("div",Ve,[p(e("input",{type:"radio",class:"btn-check",id:"discount-mode-amount",value:"amount","onUpdate:modelValue":t[10]||(t[10]=o=>_.value=o)},null,512),[[j,_.value]]),t[43]||(t[43]=e("label",{class:"btn btn-outline-primary",for:"discount-mode-amount"},"Montant (Fcfa)",-1)),p(e("input",{type:"radio",class:"btn-check",id:"discount-mode-percent",value:"percent","onUpdate:modelValue":t[11]||(t[11]=o=>_.value=o)},null,512),[[j,_.value]]),t[44]||(t[44]=e("label",{class:"btn btn-outline-primary",for:"discount-mode-percent"},"Pourcentage (%)",-1))]),_.value==="amount"?(l(),u("div",qe,[p(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=o=>a(n).discount_amount=o),step:"0.01",min:"0",class:q(["form-control",{"is-invalid":a(r).discount_amount||c.value.discount_amount}]),placeholder:"0.00"},null,2),[[x,a(n).discount_amount,void 0,{number:!0}]]),t[45]||(t[45]=e("span",{class:"input-group-text"},"Fcfa",-1))])):(l(),u("div",Fe,[p(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=o=>V.value=o),step:"0.01",min:"0",max:"100",class:"form-control",placeholder:"0.00",onInput:I},null,544),[[x,V.value,void 0,{number:!0}]]),t[46]||(t[46]=e("span",{class:"input-group-text"},"%",-1))])),_.value==="percent"&&V.value>0?(l(),u("div",Ae," = "+d(k(G.value)),1)):m("",!0),a(r).discount_amount?(l(),u("div",Pe,d(a(r).discount_amount),1)):m("",!0),c.value.discount_amount?(l(),u("div",Ce,d(c.value.discount_amount),1)):m("",!0)]),e("div",Ue,[t[49]||(t[49]=e("label",{class:"form-label"},"Acompte (Fcfa)",-1)),e("div",Se,[p(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=o=>a(n).down_payment_amount=o),step:"0.01",min:"0",max:b.value,class:q(["form-control",{"is-invalid":a(r).down_payment_amount||c.value.down_payment_amount}]),placeholder:"0.00"},null,10,Me),[[x,a(n).down_payment_amount,void 0,{number:!0}]]),t[48]||(t[48]=e("span",{class:"input-group-text"},"Fcfa",-1))]),a(r).down_payment_amount?(l(),u("div",Ie,d(a(r).down_payment_amount),1)):m("",!0),c.value.down_payment_amount?(l(),u("div",Le,d(c.value.down_payment_amount),1)):m("",!0),e("div",je," Montant maximum: "+d(k(b.value)),1)]),a(n).payment_method==="cash"?(l(),u("div",Ee,[t[51]||(t[51]=e("label",{class:"form-label"},"Montant reçu (Fcfa)",-1)),e("div",De,[p(e("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=o=>g.value=o),step:"0.01",min:"0",class:q(["form-control",{"is-invalid":g.value<(a(n).down_payment_amount>0?A.value:b.value)}]),placeholder:"0.00",disabled:a(n).down_payment_amount>0},null,10,We),[[x,g.value,void 0,{number:!0}]]),t[50]||(t[50]=e("span",{class:"input-group-text"},"Fcfa",-1))]),g.value<(a(n).down_payment_amount>0?A.value:b.value)&&g.value>0?(l(),u("div",Te," Le montant reçu doit être au moins égal à "+d(a(n).down_payment_amount>0?"le reste à payer":"le montant total"),1)):m("",!0),a(n).down_payment_amount>0?(l(),u("div",$e," Montant à recevoir: "+d(k(A.value)),1)):(l(),u("div",Re," Montant à recevoir: "+d(k(b.value)),1))])):m("",!0),t[57]||(t[57]=e("hr",null,null,-1)),e("div",ze,[t[52]||(t[52]=e("span",{class:"fw-bold"},"Total:",-1)),e("span",Ne,d(k(b.value)),1)]),a(n).down_payment_amount>0?(l(),u("div",Be,[t[53]||(t[53]=e("span",null,"Acompte:",-1)),e("span",Oe,d(k(a(n).down_payment_amount)),1)])):m("",!0),a(n).down_payment_amount>0?(l(),u("div",Qe,[t[54]||(t[54]=e("span",{class:"fw-bold"},"Reste à payer:",-1)),e("span",Ge,d(k(A.value)),1)])):m("",!0),a(n).payment_method==="cash"&&g.value>=(a(n).down_payment_amount>0?A.value:b.value)?(l(),u("div",He,[t[55]||(t[55]=e("span",{class:"fw-bold"},"Monnaie à rendre:",-1)),e("span",Je,d(k(mt.value)),1)])):m("",!0),e("div",Ke,[e("button",{type:"button",onClick:pt,class:"btn btn-success",disabled:a(W)||a(n).items.length===0},[a(W)?(l(),u("span",Ye)):(l(),u("i",Ze)),F(" "+d(a(W)?"Enregistrement...":"Enregistrer la vente"),1)],8,Xe),L(a(J),{href:a(R)("sales.index"),class:"btn btn-outline-secondary"},{default:$(()=>[...t[56]||(t[56]=[F(" Annuler ",-1)])]),_:1},8,["href"])])])])])])])]),_:1}))}}),vn=qt(tn,[["__scopeId","data-v-bfb2f8c6"]]);export{vn as default};
