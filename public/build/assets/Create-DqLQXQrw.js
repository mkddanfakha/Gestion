import{d as C,r as U,i as B,c as A,w as y,a as t,j as x,u as s,l as g,f,m as u,b as r,e as c,n as p,v as b,o as d,t as m,q as E}from"./app-Ctez1HXG.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-DkXoEYZQ.js";import{r as k}from"./routes-C8N3XD_S.js";import{u as q}from"./useSweetAlert-CjcY7Pj8.js";import"./BootstrapLayout-ri-ER_V1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const I={class:"d-flex justify-content-between align-items-center mb-4"},L={class:"row justify-content-center"},N={class:"col-lg-8"},F={class:"card mb-4"},S={class:"card-body"},M={class:"row g-3"},T={class:"col-md-6"},z={key:0,class:"invalid-feedback"},D={key:1,class:"invalid-feedback"},O={class:"col-md-6"},P={key:0,class:"invalid-feedback"},R={key:1,class:"invalid-feedback"},G={class:"col-md-6"},H={key:0,class:"invalid-feedback"},J={key:1,class:"invalid-feedback"},K={class:"col-md-6"},Q={class:"input-group"},W={key:0,class:"invalid-feedback"},X={key:1,class:"invalid-feedback"},Y={class:"card mb-4"},Z={class:"card-body"},ee={class:"row g-3"},se={class:"col-12"},te={key:0,class:"invalid-feedback"},ie={class:"col-md-4"},le={key:0,class:"invalid-feedback"},oe={class:"col-md-4"},ne={key:0,class:"invalid-feedback"},ae={class:"col-md-4"},de={key:0,class:"invalid-feedback"},re={class:"card mb-4"},me={class:"card-body"},ce={class:"form-check form-switch"},ue={class:"d-flex gap-2"},ve=["disabled"],pe={key:0,class:"spinner-border spinner-border-sm me-2"},be={key:1,class:"bi bi-check-circle me-1"},$e=C({__name:"Create",setup(fe){const{success:h,error:V}=q(),n=U({}),$=()=>{const a={};return(!i.name||i.name.trim().length<2)&&(a.name="Le nom du client est requis (minimum 2 caractères)"),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(a.email="Adresse email invalide"),i.phone&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(i.phone)&&(a.phone="Numéro de téléphone invalide"),i.credit_limit<0&&(a.credit_limit="La limite de crédit ne peut pas être négative"),Object.keys(a).length===0?null:a},v=(a,e)=>{n.value[a]&&delete n.value[a];let l="";switch(a){case"name":(!e||e.trim().length<2)&&(l="Le nom du client est requis (minimum 2 caractères)");break;case"email":e&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&(l="Adresse email invalide");break;case"phone":e&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(e)&&(l="Numéro de téléphone invalide");break;case"credit_limit":e<0&&(l="La limite de crédit ne peut pas être négative");break}l&&(n.value[a]=l)},i=B({name:"",email:"",phone:"",address:"",city:"",postal_code:"",country:"",credit_limit:0,is_active:!0}),w=()=>{n.value={};const a=$();if(a){n.value=a;return}i.post(k("customers.store"),{onSuccess:()=>{h("Client créé avec succès !"),i.reset(),n.value={}},onError:()=>{V("Erreur lors de la création du client.")}})},{errors:o,processing:_}=i;return(a,e)=>(d(),A(j,null,{default:y(()=>[t("div",I,[e[18]||(e[18]=t("div",null,[t("h1",{class:"h2 mb-1"},"Nouveau client"),t("p",{class:"text-muted mb-0"},"Ajoutez un nouveau client à votre base")],-1)),x(s(g),{href:s(k)("customers.index"),class:"btn btn-outline-secondary"},{default:y(()=>[...e[17]||(e[17]=[t("i",{class:"bi bi-arrow-left me-1"},null,-1),f(" Retour à la liste ",-1)])]),_:1},8,["href"])]),t("form",null,[t("div",L,[t("div",N,[t("div",F,[e[24]||(e[24]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Informations générales")],-1)),t("div",S,[t("div",M,[t("div",T,[e[19]||(e[19]=t("label",{class:"form-label"},[f(" Nom complet "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s(i).name=l),type:"text",required:"",class:p(["form-control",{"is-invalid":s(o).name||n.value.name}]),onBlur:e[1]||(e[1]=l=>v("name",s(i).name)),onInput:e[2]||(e[2]=l=>v("name",s(i).name))},null,34),[[b,s(i).name]]),s(o).name?(d(),r("div",z,m(s(o).name),1)):c("",!0),n.value.name?(d(),r("div",D,m(n.value.name),1)):c("",!0)]),t("div",O,[e[20]||(e[20]=t("label",{class:"form-label"},"Email",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s(i).email=l),type:"email",class:p(["form-control",{"is-invalid":s(o).email||n.value.email}]),onBlur:e[4]||(e[4]=l=>v("email",s(i).email)),onInput:e[5]||(e[5]=l=>v("email",s(i).email))},null,34),[[b,s(i).email]]),s(o).email?(d(),r("div",P,m(s(o).email),1)):c("",!0),n.value.email?(d(),r("div",R,m(n.value.email),1)):c("",!0)]),t("div",G,[e[21]||(e[21]=t("label",{class:"form-label"},"Téléphone",-1)),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s(i).phone=l),type:"tel",class:p(["form-control",{"is-invalid":s(o).phone||n.value.phone}]),onBlur:e[7]||(e[7]=l=>v("phone",s(i).phone)),onInput:e[8]||(e[8]=l=>v("phone",s(i).phone))},null,34),[[b,s(i).phone]]),s(o).phone?(d(),r("div",H,m(s(o).phone),1)):c("",!0),n.value.phone?(d(),r("div",J,m(n.value.phone),1)):c("",!0)]),t("div",K,[e[23]||(e[23]=t("label",{class:"form-label"},[f(" Limite de crédit "),t("span",{class:"text-danger"},"*")],-1)),t("div",Q,[u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>s(i).credit_limit=l),type:"number",step:"0.01",min:"0",required:"",class:p(["form-control",{"is-invalid":s(o).credit_limit||n.value.credit_limit}]),onBlur:e[10]||(e[10]=l=>v("credit_limit",s(i).credit_limit)),onInput:e[11]||(e[11]=l=>v("credit_limit",s(i).credit_limit))},null,34),[[b,s(i).credit_limit,void 0,{number:!0}]]),e[22]||(e[22]=t("span",{class:"input-group-text"},"Fcfa",-1))]),s(o).credit_limit?(d(),r("div",W,m(s(o).credit_limit),1)):c("",!0),n.value.credit_limit?(d(),r("div",X,m(n.value.credit_limit),1)):c("",!0)])])])]),t("div",Y,[e[29]||(e[29]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Adresse")],-1)),t("div",Z,[t("div",ee,[t("div",se,[e[25]||(e[25]=t("label",{class:"form-label"},"Adresse",-1)),u(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=l=>s(i).address=l),rows:"3",class:p(["form-control",{"is-invalid":s(o).address}])},null,2),[[b,s(i).address]]),s(o).address?(d(),r("div",te,m(s(o).address),1)):c("",!0)]),t("div",ie,[e[26]||(e[26]=t("label",{class:"form-label"},"Ville",-1)),u(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s(i).city=l),type:"text",class:p(["form-control",{"is-invalid":s(o).city}])},null,2),[[b,s(i).city]]),s(o).city?(d(),r("div",le,m(s(o).city),1)):c("",!0)]),t("div",oe,[e[27]||(e[27]=t("label",{class:"form-label"},"Code postal",-1)),u(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s(i).postal_code=l),type:"text",class:p(["form-control",{"is-invalid":s(o).postal_code}])},null,2),[[b,s(i).postal_code]]),s(o).postal_code?(d(),r("div",ne,m(s(o).postal_code),1)):c("",!0)]),t("div",ae,[e[28]||(e[28]=t("label",{class:"form-label"},"Pays",-1)),u(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s(i).country=l),type:"text",class:p(["form-control",{"is-invalid":s(o).country}])},null,2),[[b,s(i).country]]),s(o).country?(d(),r("div",de,m(s(o).country),1)):c("",!0)])])])]),t("div",re,[e[32]||(e[32]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Statut")],-1)),t("div",me,[t("div",ce,[u(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>s(i).is_active=l),class:"form-check-input",type:"checkbox",id:"is_active"},null,512),[[E,s(i).is_active]]),e[30]||(e[30]=t("label",{class:"form-check-label",for:"is_active"}," Client actif ",-1)),e[31]||(e[31]=t("div",{class:"form-text"}," Un client inactif ne sera pas visible dans les ventes ",-1))])])]),t("div",ue,[t("button",{type:"button",onClick:w,class:"btn btn-primary",disabled:s(_)},[s(_)?(d(),r("span",pe)):(d(),r("i",be)),f(" "+m(s(_)?"Création...":"Créer le client"),1)],8,ve),x(s(g),{href:s(k)("customers.index"),class:"btn btn-outline-secondary"},{default:y(()=>[...e[33]||(e[33]=[f(" Annuler ",-1)])]),_:1},8,["href"])])])])])]),_:1}))}});export{$e as default};
