import{d as L,i as M,r as E,c as I,w as k,a as t,j as x,u as s,l as $,f as c,m as b,b as d,e as m,n as f,v as y,o as r,t as u,p as w}from"./app-oFHxr63-.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-oJPXENP6.js";import{r as g}from"./routes-D3G7R3Tx.js";import{u as U}from"./useSweetAlert-CjcY7Pj8.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BootstrapLayout-CedOSUd9.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const F={class:"d-flex justify-content-between align-items-center mb-4"},A={class:"card mb-4"},h={class:"card-body"},N={class:"row g-3"},T={class:"col-md-8"},j={key:0,class:"invalid-feedback"},O={key:1,class:"invalid-feedback"},z={class:"col-md-4"},R={class:"input-group"},W={key:0,class:"invalid-feedback"},G={key:1,class:"invalid-feedback"},H={class:"row g-3 mt-2"},J={class:"col-md-6"},K={key:0,class:"invalid-feedback"},P={key:1,class:"invalid-feedback"},Q={class:"col-md-6"},X={key:0,class:"invalid-feedback"},Y={key:1,class:"invalid-feedback"},Z={class:"row g-3 mt-2"},ee={class:"col-md-6"},te={key:0,class:"invalid-feedback"},se={key:1,class:"invalid-feedback"},oe={class:"col-md-6"},ne={key:0,class:"invalid-feedback"},ie={key:1,class:"invalid-feedback"},ae={class:"card mb-4"},le={class:"card-body"},re={class:"row g-3"},de={class:"col-md-6"},ue={key:0,class:"invalid-feedback"},pe={key:1,class:"invalid-feedback"},me={class:"row g-3 mt-2"},ve={class:"col-12"},ce={key:0,class:"invalid-feedback"},be={key:1,class:"invalid-feedback"},fe={class:"row g-3 mt-2"},ye={class:"col-12"},_e={key:0,class:"invalid-feedback"},ke={key:1,class:"invalid-feedback"},ge={class:"card"},xe={class:"card-body"},$e={class:"d-grid gap-2"},we=["disabled"],Ce={key:0,class:"spinner-border spinner-border-sm me-2"},qe={key:1,class:"bi bi-check-circle me-1"},Be=L({__name:"Create",setup(Ve){const{success:C,error:q}=U(),i=M({title:"",description:"",amount:0,category:"",payment_method:"",expense_date:new Date().toISOString().split("T")[0],receipt_number:"",vendor:"",notes:""}),n=E({}),v=l=>typeof l=="string"?l.trim()!=="":typeof l=="number"?l!=null&&l!==0:l!=null,B=()=>{const l={};return v(i.title)||(l.title="Le titre est requis"),v(i.amount)?i.amount<0&&(l.amount="Le montant doit être positif"):l.amount="Le montant est requis",v(i.category)||(l.category="La catégorie est requise"),v(i.payment_method)||(l.payment_method="La méthode de paiement est requise"),v(i.expense_date)||(l.expense_date="La date de dépense est requise"),l},p=l=>{const e=i[l];let o="";switch(l){case"title":v(e)||(o="Le titre est requis");break;case"amount":v(e)?i.amount<0&&(o="Le montant doit être positif"):o="Le montant est requis";break;case"category":v(e)||(o="La catégorie est requise");break;case"payment_method":v(e)||(o="La méthode de paiement est requise");break;case"expense_date":v(e)||(o="La date de dépense est requise");break}o?n.value[l]=o:delete n.value[l]},V=()=>{n.value={};const l=B();if(Object.keys(l).length>0){n.value=l;return}i.post(g("expenses.store"),{onSuccess:()=>{C("Dépense créée avec succès !")},onError:()=>{q("Erreur lors de la création de la dépense.")}})},{errors:a,processing:_}=i;return(l,e)=>(r(),I(S,null,{default:k(()=>[t("div",F,[e[28]||(e[28]=t("div",null,[t("h1",{class:"h2 mb-1"},"Nouvelle dépense"),t("p",{class:"text-muted mb-0"},"Enregistrez une nouvelle dépense")],-1)),x(s($),{href:s(g)("expenses.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[27]||(e[27]=[t("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Retour à la liste ",-1)])]),_:1},8,["href"])]),t("form",null,[t("div",A,[e[38]||(e[38]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-info-circle me-2"}),c(" Informations générales ")])],-1)),t("div",h,[t("div",N,[t("div",T,[e[29]||(e[29]=t("label",{for:"title",class:"form-label"},[c(" Titre de la dépense "),t("span",{class:"text-danger"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(i).title=o),type:"text",class:f(["form-control",{"is-invalid":s(a).title||n.value.title}]),id:"title",placeholder:"Ex: Achat de fournitures de bureau",onInput:e[1]||(e[1]=o=>p("title")),onBlur:e[2]||(e[2]=o=>p("title"))},null,34),[[y,s(i).title]]),s(a).title?(r(),d("div",j,u(s(a).title),1)):m("",!0),n.value.title?(r(),d("div",O,u(n.value.title),1)):m("",!0)]),t("div",z,[e[31]||(e[31]=t("label",{for:"amount",class:"form-label"},[c(" Montant "),t("span",{class:"text-danger"},"*")],-1)),t("div",R,[b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(i).amount=o),type:"number",step:"0.01",min:"0",class:f(["form-control",{"is-invalid":s(a).amount||n.value.amount}]),id:"amount",placeholder:"0.00",onInput:e[4]||(e[4]=o=>p("amount")),onBlur:e[5]||(e[5]=o=>p("amount"))},null,34),[[y,s(i).amount]]),e[30]||(e[30]=t("span",{class:"input-group-text"},"Fcfa",-1))]),s(a).amount?(r(),d("div",W,u(s(a).amount),1)):m("",!0),n.value.amount?(r(),d("div",G,u(n.value.amount),1)):m("",!0)])]),t("div",H,[t("div",J,[e[33]||(e[33]=t("label",{for:"category",class:"form-label"},[c(" Catégorie "),t("span",{class:"text-danger"},"*")],-1)),b(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s(i).category=o),class:f(["form-select",{"is-invalid":s(a).category||n.value.category}]),id:"category",onChange:e[7]||(e[7]=o=>p("category")),onBlur:e[8]||(e[8]=o=>p("category"))},[...e[32]||(e[32]=[t("option",{value:""},"Sélectionner une catégorie",-1),t("option",{value:"fournitures"},"Fournitures",-1),t("option",{value:"equipement"},"Équipement",-1),t("option",{value:"marketing"},"Marketing",-1),t("option",{value:"transport"},"Transport",-1),t("option",{value:"formation"},"Formation",-1),t("option",{value:"maintenance"},"Maintenance",-1),t("option",{value:"utilities"},"Services publics",-1),t("option",{value:"autres"},"Autres",-1)])],34),[[w,s(i).category]]),s(a).category?(r(),d("div",K,u(s(a).category),1)):m("",!0),n.value.category?(r(),d("div",P,u(n.value.category),1)):m("",!0)]),t("div",Q,[e[35]||(e[35]=t("label",{for:"payment_method",class:"form-label"},[c(" Méthode de paiement "),t("span",{class:"text-danger"},"*")],-1)),b(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>s(i).payment_method=o),class:f(["form-select",{"is-invalid":s(a).payment_method||n.value.payment_method}]),id:"payment_method",onChange:e[10]||(e[10]=o=>p("payment_method")),onBlur:e[11]||(e[11]=o=>p("payment_method"))},[...e[34]||(e[34]=[t("option",{value:""},"Sélectionner une méthode",-1),t("option",{value:"cash"},"Espèces",-1),t("option",{value:"bank_transfer"},"Virement bancaire",-1),t("option",{value:"credit_card"},"Carte de crédit",-1),t("option",{value:"mobile_money"},"Mobile Money",-1),t("option",{value:"orange_money"},"Orange Money",-1),t("option",{value:"wave"},"Wave",-1),t("option",{value:"check"},"Chèque",-1)])],34),[[w,s(i).payment_method]]),s(a).payment_method?(r(),d("div",X,u(s(a).payment_method),1)):m("",!0),n.value.payment_method?(r(),d("div",Y,u(n.value.payment_method),1)):m("",!0)])]),t("div",Z,[t("div",ee,[e[36]||(e[36]=t("label",{for:"expense_date",class:"form-label"},[c(" Date de la dépense "),t("span",{class:"text-danger"},"*")],-1)),b(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s(i).expense_date=o),type:"date",class:f(["form-control",{"is-invalid":s(a).expense_date||n.value.expense_date}]),id:"expense_date",onChange:e[13]||(e[13]=o=>p("expense_date")),onBlur:e[14]||(e[14]=o=>p("expense_date"))},null,34),[[y,s(i).expense_date]]),s(a).expense_date?(r(),d("div",te,u(s(a).expense_date),1)):m("",!0),n.value.expense_date?(r(),d("div",se,u(n.value.expense_date),1)):m("",!0)]),t("div",oe,[e[37]||(e[37]=t("label",{for:"vendor",class:"form-label"},"Fournisseur",-1)),b(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>s(i).vendor=o),type:"text",class:f(["form-control",{"is-invalid":s(a).vendor||n.value.vendor}]),id:"vendor",placeholder:"Ex: Magasin ABC",onInput:e[16]||(e[16]=o=>p("vendor")),onBlur:e[17]||(e[17]=o=>p("vendor"))},null,34),[[y,s(i).vendor]]),s(a).vendor?(r(),d("div",ne,u(s(a).vendor),1)):m("",!0),n.value.vendor?(r(),d("div",ie,u(n.value.vendor),1)):m("",!0)])])])]),t("div",ae,[e[42]||(e[42]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"bi bi-file-text me-2"}),c(" Détails supplémentaires ")])],-1)),t("div",le,[t("div",re,[t("div",de,[e[39]||(e[39]=t("label",{for:"receipt_number",class:"form-label"},"Numéro de reçu/facture",-1)),b(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s(i).receipt_number=o),type:"text",class:f(["form-control",{"is-invalid":s(a).receipt_number||n.value.receipt_number}]),id:"receipt_number",placeholder:"Ex: FAC-2025-001",onInput:e[19]||(e[19]=o=>p("receipt_number")),onBlur:e[20]||(e[20]=o=>p("receipt_number"))},null,34),[[y,s(i).receipt_number]]),s(a).receipt_number?(r(),d("div",ue,u(s(a).receipt_number),1)):m("",!0),n.value.receipt_number?(r(),d("div",pe,u(n.value.receipt_number),1)):m("",!0)])]),t("div",me,[t("div",ve,[e[40]||(e[40]=t("label",{for:"description",class:"form-label"},"Description",-1)),b(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=o=>s(i).description=o),class:f(["form-control",{"is-invalid":s(a).description||n.value.description}]),id:"description",rows:"3",placeholder:"Description détaillée de la dépense...",onInput:e[22]||(e[22]=o=>p("description")),onBlur:e[23]||(e[23]=o=>p("description"))},null,34),[[y,s(i).description]]),s(a).description?(r(),d("div",ce,u(s(a).description),1)):m("",!0),n.value.description?(r(),d("div",be,u(n.value.description),1)):m("",!0)])]),t("div",fe,[t("div",ye,[e[41]||(e[41]=t("label",{for:"notes",class:"form-label"},"Notes",-1)),b(t("textarea",{"onUpdate:modelValue":e[24]||(e[24]=o=>s(i).notes=o),class:f(["form-control",{"is-invalid":s(a).notes||n.value.notes}]),id:"notes",rows:"2",placeholder:"Notes additionnelles...",onInput:e[25]||(e[25]=o=>p("notes")),onBlur:e[26]||(e[26]=o=>p("notes"))},null,34),[[y,s(i).notes]]),s(a).notes?(r(),d("div",_e,u(s(a).notes),1)):m("",!0),n.value.notes?(r(),d("div",ke,u(n.value.notes),1)):m("",!0)])])])]),t("div",ge,[e[44]||(e[44]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Actions")],-1)),t("div",xe,[t("div",$e,[t("button",{type:"button",onClick:V,class:"btn btn-primary",disabled:s(_)},[s(_)?(r(),d("span",Ce)):(r(),d("i",qe)),c(" "+u(s(_)?"Création...":"Créer la dépense"),1)],8,we),x(s($),{href:s(g)("expenses.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[43]||(e[43]=[c(" Annuler ",-1)])]),_:1},8,["href"])])])])])]),_:1}))}}),Fe=D(Be,[["__scopeId","data-v-585d85b2"]]);export{Fe as default};
