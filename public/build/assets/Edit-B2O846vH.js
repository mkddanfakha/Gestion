import{d as q,r as L,i as A,c as E,w as y,a as o,j as h,s as w,u as t,t as a,l as B,f as p,m as v,b as c,e as u,n as b,v as g,o as d}from"./app-C-EDQi3A.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-DVp6PXdS.js";import{r as _}from"./routes-C8N3XD_S.js";import{u as M}from"./useSweetAlert-CjcY7Pj8.js";import"./BootstrapLayout-DqI2cyng.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const R={class:"d-flex justify-content-between align-items-center mb-4"},j={class:"d-flex align-items-center"},G={class:"text-muted mb-0"},S={class:"row justify-content-center"},U={class:"col-lg-8"},I={class:"card"},N={class:"card-body"},z={class:"mb-3"},T={key:0,class:"invalid-feedback"},O={key:1,class:"invalid-feedback"},H={class:"mb-3"},J={key:0,class:"invalid-feedback"},K={key:1,class:"invalid-feedback"},P={class:"mb-3"},Q={class:"row g-2"},W={class:"col-auto"},X={class:"col"},Y={key:0,class:"text-danger small"},Z={key:1,class:"text-danger small"},ee={class:"mb-4"},oe={class:"p-3 border rounded bg-light"},te={class:"d-flex align-items-center"},se={class:"fw-medium"},re={class:"text-muted small"},ie={class:"d-flex gap-2"},le=["disabled"],ne={key:0,class:"spinner-border spinner-border-sm me-2"},ae={key:1,class:"bi bi-check-circle me-1"},be=q({__name:"Edit",props:{category:{}},setup(k){const f=k,{success:$,error:C}=M(),i=L({}),s=A({name:f.category.name,description:f.category.description||"",color:f.category.color}),F=()=>{const l={};return(!s.name||s.name.trim().length<2)&&(l.name="Le nom de la catégorie est requis (minimum 2 caractères)"),s.name&&s.name.length>255&&(l.name="Le nom ne peut pas dépasser 255 caractères"),s.description&&s.description.length>1e3&&(l.description="La description ne peut pas dépasser 1000 caractères"),(!s.color||!/^#[0-9A-Fa-f]{6}$/.test(s.color))&&(l.color="La couleur est requise et doit être au format hexadécimal (#RRGGBB)"),Object.keys(l).length===0?null:l},m=(l,e)=>{i.value[l]&&delete i.value[l];let r="";switch(l){case"name":!e||e.trim().length<2?r="Le nom de la catégorie est requis (minimum 2 caractères)":e.length>255&&(r="Le nom ne peut pas dépasser 255 caractères");break;case"description":e&&e.length>1e3&&(r="La description ne peut pas dépasser 1000 caractères");break;case"color":(!e||!/^#[0-9A-Fa-f]{6}$/.test(e))&&(r="La couleur est requise et doit être au format hexadécimal (#RRGGBB)");break}r&&(i.value[l]=r)},V=()=>{i.value={};const l=F();if(l){i.value=l;return}s.put(_("categories.update",{id:f.category.id}),{onSuccess:()=>{$("Catégorie modifiée avec succès !"),i.value={}},onError:()=>{C("Erreur lors de la modification de la catégorie.")}})},{errors:n,processing:x}=s;return(l,e)=>(d(),E(D,null,{default:y(()=>[o("div",R,[o("div",null,[o("div",j,[o("div",{class:"rounded-circle me-3",style:w([{width:"24px",height:"24px"},{backgroundColor:t(s).color}])},null,4),e[11]||(e[11]=o("h1",{class:"h2 mb-1"},"Modifier la catégorie",-1))]),o("p",G,a(k.category.name),1)]),h(t(B),{href:t(_)("categories.index"),class:"btn btn-outline-secondary"},{default:y(()=>[...e[12]||(e[12]=[o("i",{class:"bi bi-arrow-left me-1"},null,-1),p(" Retour à la liste ",-1)])]),_:1},8,["href"])]),o("div",S,[o("div",U,[o("div",I,[o("div",N,[o("form",null,[o("div",z,[e[13]||(e[13]=o("label",{class:"form-label"},[p(" Nom de la catégorie "),o("span",{class:"text-danger"},"*")],-1)),v(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).name=r),type:"text",required:"",class:b(["form-control",{"is-invalid":t(n).name||i.value.name}]),placeholder:"Ex: Électronique, Vêtements, Alimentaire...",onBlur:e[1]||(e[1]=r=>m("name",t(s).name)),onInput:e[2]||(e[2]=r=>m("name",t(s).name))},null,34),[[g,t(s).name]]),t(n).name?(d(),c("div",T,a(t(n).name),1)):u("",!0),i.value.name?(d(),c("div",O,a(i.value.name),1)):u("",!0)]),o("div",H,[e[14]||(e[14]=o("label",{class:"form-label"},"Description",-1)),v(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).description=r),rows:"3",class:b(["form-control",{"is-invalid":t(n).description||i.value.description}]),placeholder:"Description de la catégorie (optionnel)",onBlur:e[4]||(e[4]=r=>m("description",t(s).description)),onInput:e[5]||(e[5]=r=>m("description",t(s).description))},null,34),[[g,t(s).description]]),t(n).description?(d(),c("div",J,a(t(n).description),1)):u("",!0),i.value.description?(d(),c("div",K,a(i.value.description),1)):u("",!0)]),o("div",P,[e[16]||(e[16]=o("label",{class:"form-label"},[p(" Couleur "),o("span",{class:"text-danger"},"*")],-1)),o("div",Q,[o("div",W,[v(o("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>t(s).color=r),type:"color",required:"",class:b(["form-control form-control-color",{"is-invalid":t(n).color||i.value.color}]),onChange:e[7]||(e[7]=r=>m("color",t(s).color))},null,34),[[g,t(s).color]])]),o("div",X,[v(o("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>t(s).color=r),type:"text",required:"",class:b(["form-control font-monospace",{"is-invalid":t(n).color||i.value.color}]),placeholder:"#3B82F6",pattern:"^#[0-9A-Fa-f]{6}$",onBlur:e[9]||(e[9]=r=>m("color",t(s).color)),onInput:e[10]||(e[10]=r=>m("color",t(s).color))},null,34),[[g,t(s).color]]),e[15]||(e[15]=o("div",{class:"form-text"}," Format hexadécimal (ex: #3B82F6) ",-1))])]),t(n).color?(d(),c("div",Y,a(t(n).color),1)):u("",!0),i.value.color?(d(),c("div",Z,a(i.value.color),1)):u("",!0)]),o("div",ee,[e[17]||(e[17]=o("label",{class:"form-label"},"Aperçu",-1)),o("div",oe,[o("div",te,[o("div",{class:"rounded-circle me-3",style:w([{width:"16px",height:"16px"},{backgroundColor:t(s).color}])},null,4),o("div",null,[o("div",se,a(t(s).name||"Nom de la catégorie"),1),o("div",re,a(t(s).description||"Description de la catégorie"),1)])])])]),o("div",ie,[o("button",{type:"button",class:"btn btn-primary",disabled:t(x),onClick:V},[t(x)?(d(),c("span",ne)):(d(),c("i",ae)),p(" "+a(t(x)?"Modification...":"Modifier la catégorie"),1)],8,le),h(t(B),{href:t(_)("categories.index"),class:"btn btn-outline-secondary"},{default:y(()=>[...e[18]||(e[18]=[p(" Annuler ",-1)])]),_:1},8,["href"])])])])])])])]),_:1}))}});export{be as default};
