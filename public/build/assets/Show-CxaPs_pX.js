import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-IbUY7iBr.js";import{d as k,c as C,w as n,a as s,t as l,j as b,u as d,l as f,f as a,n as _,b as r,o as c,F as S,g as A,h as D}from"./app-CKyF0dn4.js";import{r as m}from"./routes-D3G7R3Tx.js";import{u as F}from"./useSweetAlert-CjcY7Pj8.js";import"./BootstrapLayout-DOjYiQwv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const E={class:"d-flex justify-content-between align-items-center mb-4"},V={class:"h2 mb-1"},B={class:"row g-4"},L={class:"col-lg-8"},j={class:"card mb-4"},I={class:"card-body"},M={class:"row g-3"},P={class:"col-md-6"},R={class:"mb-0"},$={class:"col-md-6"},T={class:"mb-0"},z={class:"col-md-6"},q={class:"mb-0"},G={class:"col-md-6"},H={class:"mb-0"},J={class:"card mb-4"},K={class:"card-body"},O={class:"row g-3"},Q={class:"col-12"},U={class:"mb-0"},W={class:"col-md-4"},X={class:"mb-0"},Y={class:"col-md-4"},Z={class:"mb-0"},ss={class:"col-md-4"},ts={class:"mb-0"},es={class:"card"},ls={class:"card-body"},os={class:"row g-3"},is={class:"col-md-6"},ds={class:"mb-0"},as={class:"col-md-6"},cs={class:"mb-0"},ns={class:"col-lg-4"},rs={class:"card mb-4"},ms={class:"card-body"},us={key:0},bs={class:"d-flex justify-content-between align-items-start"},fs={class:"fw-medium mb-1"},vs={class:"text-muted small mb-0"},_s={class:"text-end"},hs={class:"fw-medium text-success mb-1"},gs={class:"text-muted small mb-0"},xs={key:1,class:"text-center py-4"},ys={class:"card"},ps={class:"card-body"},ws={class:"d-grid gap-2"},Es=k({__name:"Show",props:{customer:{}},setup(e){const u=e,{success:h,error:g,confirm:x}=F(),v=o=>new Intl.NumberFormat("fr-FR").format(o)+" Fcfa",y=o=>new Date(o).toLocaleDateString("fr-FR"),p=o=>({cash:"Espèces",card:"Carte",transfer:"Virement"})[o]||o,w=async()=>{await x(`Êtes-vous sûr de vouloir supprimer le client "${u.customer.name}" ?`)&&D.delete(m("customers.destroy",{id:u.customer.id}),{onSuccess:()=>{h(`Client "${u.customer.name}" supprimé avec succès !`)},onError:t=>{const i=t.message||"Erreur lors de la suppression du client.";g(i)}})};return(o,t)=>(c(),C(N,null,{default:n(()=>[s("div",E,[s("div",null,[s("h1",V,l(e.customer.name),1),t[0]||(t[0]=s("p",{class:"text-muted mb-0"},"Détails du client",-1))]),s("div",null,[b(d(f),{href:d(m)("customers.index"),class:"btn btn-outline-secondary"},{default:n(()=>[...t[1]||(t[1]=[s("i",{class:"bi bi-arrow-left me-1"},null,-1),a(" Retour à la liste ",-1)])]),_:1},8,["href"])])]),s("div",B,[s("div",L,[s("div",j,[t[6]||(t[6]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},"Informations générales")],-1)),s("div",I,[s("div",M,[s("div",P,[t[2]||(t[2]=s("label",{class:"form-label text-muted"},"Nom complet",-1)),s("p",R,l(e.customer.name),1)]),s("div",$,[t[3]||(t[3]=s("label",{class:"form-label text-muted"},"Email",-1)),s("p",T,l(e.customer.email||"Non renseigné"),1)]),s("div",z,[t[4]||(t[4]=s("label",{class:"form-label text-muted"},"Téléphone",-1)),s("p",q,l(e.customer.phone||"Non renseigné"),1)]),s("div",G,[t[5]||(t[5]=s("label",{class:"form-label text-muted"},"Statut",-1)),s("p",H,[s("span",{class:_(["badge",e.customer.is_active?"bg-success":"bg-danger"])},[s("i",{class:_(["me-1",e.customer.is_active?"bi bi-check-circle":"bi bi-x-circle"])},null,2),a(" "+l(e.customer.is_active?"Actif":"Inactif"),1)],2)])])])])]),s("div",J,[t[11]||(t[11]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},"Adresse")],-1)),s("div",K,[s("div",O,[s("div",Q,[t[7]||(t[7]=s("label",{class:"form-label text-muted"},"Adresse",-1)),s("p",U,l(e.customer.address||"Non renseignée"),1)]),s("div",W,[t[8]||(t[8]=s("label",{class:"form-label text-muted"},"Ville",-1)),s("p",X,l(e.customer.city||"Non renseignée"),1)]),s("div",Y,[t[9]||(t[9]=s("label",{class:"form-label text-muted"},"Code postal",-1)),s("p",Z,l(e.customer.postal_code||"Non renseigné"),1)]),s("div",ss,[t[10]||(t[10]=s("label",{class:"form-label text-muted"},"Pays",-1)),s("p",ts,l(e.customer.country||"Non renseigné"),1)])])])]),s("div",es,[t[14]||(t[14]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},"Paramètres commerciaux")],-1)),s("div",ls,[s("div",os,[s("div",is,[t[12]||(t[12]=s("label",{class:"form-label text-muted"},"Limite de crédit",-1)),s("p",ds,l(e.customer.credit_limit?v(e.customer.credit_limit):"Non définie"),1)]),s("div",as,[t[13]||(t[13]=s("label",{class:"form-label text-muted"},"Nombre de ventes",-1)),s("p",cs,l(e.customer.sales_count||0)+" vente(s)",1)])])])])]),s("div",ns,[s("div",rs,[t[16]||(t[16]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},"Dernières ventes")],-1)),s("div",ms,[e.customer.sales&&e.customer.sales.length>0?(c(),r("div",us,[(c(!0),r(S,null,A(e.customer.sales.slice(0,3),i=>(c(),r("div",{key:i.id,class:"border rounded p-3 mb-3"},[s("div",bs,[s("div",null,[s("p",fs,l(i.sale_number),1),s("p",vs,l(y(i.created_at)),1)]),s("div",_s,[s("p",hs,l(v(i.total_amount)),1),s("p",gs,l(p(i.payment_method)),1)])])]))),128))])):(c(),r("div",xs,[...t[15]||(t[15]=[s("i",{class:"bi bi-cart-x fs-1 text-muted mb-3"},null,-1),s("p",{class:"text-muted mb-0"},"Aucune vente enregistrée",-1)])]))])]),s("div",ys,[t[20]||(t[20]=s("div",{class:"card-header"},[s("h5",{class:"card-title mb-0"},"Actions rapides")],-1)),s("div",ps,[s("div",ws,[b(d(f),{href:d(m)("customers.edit",{id:e.customer.id}),class:"btn btn-primary"},{default:n(()=>[...t[17]||(t[17]=[s("i",{class:"bi bi-pencil me-1"},null,-1),a(" Modifier ",-1)])]),_:1},8,["href"]),b(d(f),{href:d(m)("sales.create"),class:"btn btn-success"},{default:n(()=>[...t[18]||(t[18]=[s("i",{class:"bi bi-cart-plus me-1"},null,-1),a(" Nouvelle vente ",-1)])]),_:1},8,["href"]),s("button",{onClick:w,class:"btn btn-outline-danger"},[...t[19]||(t[19]=[s("i",{class:"bi bi-trash me-1"},null,-1),a(" Supprimer le client ",-1)])])])])])])])]),_:1}))}});export{Es as default};
