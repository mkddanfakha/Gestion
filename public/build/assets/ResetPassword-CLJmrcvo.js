import{d as B,x as M,r as N,B as E,h as P,c as U,w as $,j as F,a as e,u as o,M as j,b as n,e as b,m as v,P as _,U as y,v as k,o as r,t as d,f as z}from"./app-CsO4tl6o.js";import{_ as D}from"./AuthLayout.vue_vue_type_script_setup_true_lang-DvDQkQkU.js";import{c as O,a as g,b as T,u as G}from"./index.esm-DjNkMxUu.js";import{r as H}from"./routes-C8N3XD_S.js";import{u as I}from"./useSweetAlert-CjcY7Pj8.js";import"./index-DCXxZH4Q.js";import"./index-CMWG4mbA.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const J={class:"card shadow-sm border-0"},K={class:"card-body p-4 p-md-5"},Q={class:"mb-3"},W={class:"input-group"},X={key:0,class:"invalid-feedback d-block"},Y={class:"mb-3"},Z={class:"input-group"},ss={key:0,class:"invalid-feedback d-block"},es={class:"mb-3"},os={class:"input-group"},as={key:0,class:"invalid-feedback d-block"},is=["disabled"],ts={key:0,class:"spinner-border spinner-border-sm me-2"},rs={key:1,class:"bi bi-key me-2"},ws=B({__name:"ResetPassword",props:{token:{},email:{}},setup(V){const l=V,{success:A}=I(),S=M();N(l.email);const h=O({email:g().required("L'email est requis").email("L'email doit être valide"),password:g().required("Le nouveau mot de passe est requis").min(8,"Le mot de passe doit contenir au moins 8 caractères"),password_confirmation:g().required("La confirmation du mot de passe est requise").oneOf([T("password")],"Les mots de passe ne correspondent pas")}),{handleSubmit:q,defineField:m,errors:i,isSubmitting:p,setFieldError:u}=G({validationSchema:h,initialValues:{email:l.email,password:"",password_confirmation:""}}),[c,C]=m("email"),[f,L]=m("password"),[w,R]=m("password_confirmation");E(()=>S.props.errors,a=>{if(a&&Object.keys(a).length>0){if(a.email){const s=Array.isArray(a.email)?a.email[0]:a.email;u("email",s)}if(a.password){const s=Array.isArray(a.password)?a.password[0]:a.password;u("password",s)}if(a.password_confirmation){const s=Array.isArray(a.password_confirmation)?a.password_confirmation[0]:a.password_confirmation;u("password_confirmation",s)}}},{deep:!0});const x=q(a=>{P.post(H("password.store"),{...a,token:l.token},{onSuccess:()=>{A("Votre mot de passe a été réinitialisé avec succès. Vous pouvez maintenant vous connecter.")}})});return(a,s)=>(r(),U(D,{title:"Réinitialiser le mot de passe",description:"Veuillez entrer votre nouveau mot de passe ci-dessous"},{default:$(()=>[F(o(j),{title:"Réinitialiser le mot de passe"}),e("div",J,[e("div",K,[e("form",{onSubmit:s[3]||(s[3]=(...t)=>o(x)&&o(x)(...t))},[e("div",Q,[s[5]||(s[5]=e("label",{for:"email",class:"form-label fw-medium"},"Email",-1)),e("div",W,[s[4]||(s[4]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-envelope text-muted"})],-1)),v(e("input",_({id:"email","onUpdate:modelValue":s[0]||(s[0]=t=>y(c)?c.value=t:null)},o(C),{type:"email",class:["form-control",{"is-invalid":o(i).email}],readonly:"",autocomplete:"email"}),null,16),[[k,o(c)]])]),o(i).email?(r(),n("div",X,d(o(i).email),1)):b("",!0)]),e("div",Y,[s[7]||(s[7]=e("label",{for:"password",class:"form-label fw-medium"},"Nouveau mot de passe",-1)),e("div",Z,[s[6]||(s[6]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock text-muted"})],-1)),v(e("input",_({id:"password","onUpdate:modelValue":s[1]||(s[1]=t=>y(f)?f.value=t:null)},o(L),{type:"password",class:["form-control",{"is-invalid":o(i).password}],placeholder:"••••••••",autocomplete:"new-password"}),null,16),[[k,o(f)]])]),o(i).password?(r(),n("div",ss,d(o(i).password),1)):b("",!0)]),e("div",es,[s[9]||(s[9]=e("label",{for:"password_confirmation",class:"form-label fw-medium"},"Confirmer le mot de passe",-1)),e("div",os,[s[8]||(s[8]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock text-muted"})],-1)),v(e("input",_({id:"password_confirmation","onUpdate:modelValue":s[2]||(s[2]=t=>y(w)?w.value=t:null)},o(R),{type:"password",class:["form-control",{"is-invalid":o(i).password_confirmation}],placeholder:"••••••••",autocomplete:"new-password"}),null,16),[[k,o(w)]])]),o(i).password_confirmation?(r(),n("div",as,d(o(i).password_confirmation),1)):b("",!0)]),e("button",{type:"submit",class:"btn btn-primary w-100 py-2 fw-medium",disabled:o(p)},[o(p)?(r(),n("span",ts)):(r(),n("i",rs)),z(" "+d(o(p)?"Réinitialisation...":"Réinitialiser le mot de passe"),1)],8,is)],32)])])]),_:1}))}});export{ws as default};
