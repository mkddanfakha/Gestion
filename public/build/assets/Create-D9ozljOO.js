import{d as B,r as N,i as A,c as C,w as k,a as t,j as x,u as s,l as V,f,m as c,b as d,e as u,n as v,v as p,o as a,t as r,p as I}from"./app-CGqa7dvF.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-CUowRV7B.js";import{r as _}from"./routes-Ds1K_LXc.js";import{u as h}from"./useSweetAlert-CjcY7Pj8.js";import"./BootstrapLayout-L_TowVZG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const j={class:"d-flex justify-content-between align-items-center mb-4"},S={class:"row justify-content-center"},q={class:"col-lg-8"},F={class:"card mb-4"},M={class:"card-body"},T={class:"row g-3"},z={class:"col-md-6"},D={key:0,class:"invalid-feedback"},L={key:1,class:"invalid-feedback"},P={class:"col-md-6"},O={key:0,class:"invalid-feedback"},R={key:1,class:"invalid-feedback"},G={class:"col-md-6"},H={key:0,class:"invalid-feedback"},J={key:1,class:"invalid-feedback"},K={class:"col-md-6"},Q={key:0,class:"invalid-feedback"},W={key:1,class:"invalid-feedback"},X={class:"col-md-6"},Y={key:0,class:"invalid-feedback"},Z={key:1,class:"invalid-feedback"},ee={class:"col-md-6"},se={key:0,class:"invalid-feedback"},te={class:"card mb-4"},oe={class:"card-body"},le={class:"row g-3"},ie={class:"col-12"},ne={key:0,class:"invalid-feedback"},ae={class:"col-md-6"},de={key:0,class:"invalid-feedback"},re={class:"col-md-6"},ue={key:0,class:"invalid-feedback"},me={class:"card mb-4"},ce={class:"card-body"},ve={class:"row g-3"},pe={class:"col-12"},be={key:0,class:"invalid-feedback"},fe={class:"col-12"},ye={key:0,class:"invalid-feedback"},ke={class:"d-flex gap-2"},_e=["disabled"],xe={key:0,class:"spinner-border spinner-border-sm me-2"},Ve={key:1,class:"bi bi-check-circle me-1"},Ie=B({__name:"Create",setup($e){const{success:$,error:g}=h(),n=N({}),w=()=>{const m={};return(!o.name||o.name.trim().length<2)&&(m.name="Le nom du fournisseur est requis (minimum 2 caractères)"),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(m.email="Adresse email invalide"),o.phone&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(o.phone)&&(m.phone="Numéro de téléphone invalide"),o.mobile&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(o.mobile)&&(m.mobile="Numéro de mobile invalide"),Object.keys(m).length===0?null:m},b=(m,e)=>{n.value[m]&&delete n.value[m];let l="";switch(m){case"name":(!e||e.trim().length<2)&&(l="Le nom du fournisseur est requis (minimum 2 caractères)");break;case"email":e&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&(l="Adresse email invalide");break;case"phone":e&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(e)&&(l="Numéro de téléphone invalide");break;case"mobile":e&&!/^[\+]?[0-9\s\-\(\)]{8,}$/.test(e)&&(l="Numéro de mobile invalide");break}l&&(n.value[m]=l)},o=A({name:"",contact_person:"",email:"",phone:"",mobile:"",address:"",city:"",country:"",tax_id:"",notes:"",status:"active"}),U=()=>{n.value={};const m=w();if(m){n.value=m;return}o.post(_("suppliers.store"),{onSuccess:()=>{$("Fournisseur créé avec succès !"),o.reset(),n.value={}},onError:()=>{g("Erreur lors de la création du fournisseur.")}})},{errors:i,processing:y}=o;return(m,e)=>(a(),C(E,null,{default:k(()=>[t("div",j,[e[21]||(e[21]=t("div",null,[t("h1",{class:"h2 mb-1"},"Nouveau fournisseur"),t("p",{class:"text-muted mb-0"},"Ajoutez un nouveau fournisseur à votre base")],-1)),x(s(V),{href:s(_)("suppliers.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[20]||(e[20]=[t("i",{class:"bi bi-arrow-left me-1"},null,-1),f(" Retour à la liste ",-1)])]),_:1},8,["href"])]),t("form",null,[t("div",S,[t("div",q,[t("div",F,[e[28]||(e[28]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Informations générales")],-1)),t("div",M,[t("div",T,[t("div",z,[e[22]||(e[22]=t("label",{class:"form-label"},[f(" Nom du fournisseur "),t("span",{class:"text-danger"},"*")],-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s(o).name=l),type:"text",required:"",class:v(["form-control",{"is-invalid":s(i).name||n.value.name}]),onBlur:e[1]||(e[1]=l=>b("name",s(o).name)),onInput:e[2]||(e[2]=l=>b("name",s(o).name))},null,34),[[p,s(o).name]]),s(i).name?(a(),d("div",D,r(s(i).name),1)):u("",!0),n.value.name?(a(),d("div",L,r(n.value.name),1)):u("",!0)]),t("div",P,[e[23]||(e[23]=t("label",{class:"form-label"},"Personne de contact",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s(o).contact_person=l),type:"text",class:v(["form-control",{"is-invalid":s(i).contact_person||n.value.contact_person}]),onBlur:e[4]||(e[4]=l=>b("contact_person",s(o).contact_person))},null,34),[[p,s(o).contact_person]]),s(i).contact_person?(a(),d("div",O,r(s(i).contact_person),1)):u("",!0),n.value.contact_person?(a(),d("div",R,r(n.value.contact_person),1)):u("",!0)]),t("div",G,[e[24]||(e[24]=t("label",{class:"form-label"},"Email",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s(o).email=l),type:"email",class:v(["form-control",{"is-invalid":s(i).email||n.value.email}]),onBlur:e[6]||(e[6]=l=>b("email",s(o).email)),onInput:e[7]||(e[7]=l=>b("email",s(o).email))},null,34),[[p,s(o).email]]),s(i).email?(a(),d("div",H,r(s(i).email),1)):u("",!0),n.value.email?(a(),d("div",J,r(n.value.email),1)):u("",!0)]),t("div",K,[e[25]||(e[25]=t("label",{class:"form-label"},"Téléphone",-1)),c(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>s(o).phone=l),type:"tel",class:v(["form-control",{"is-invalid":s(i).phone||n.value.phone}]),onBlur:e[9]||(e[9]=l=>b("phone",s(o).phone)),onInput:e[10]||(e[10]=l=>b("phone",s(o).phone))},null,34),[[p,s(o).phone]]),s(i).phone?(a(),d("div",Q,r(s(i).phone),1)):u("",!0),n.value.phone?(a(),d("div",W,r(n.value.phone),1)):u("",!0)]),t("div",X,[e[26]||(e[26]=t("label",{class:"form-label"},"Mobile",-1)),c(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>s(o).mobile=l),type:"tel",class:v(["form-control",{"is-invalid":s(i).mobile||n.value.mobile}]),onBlur:e[12]||(e[12]=l=>b("mobile",s(o).mobile)),onInput:e[13]||(e[13]=l=>b("mobile",s(o).mobile))},null,34),[[p,s(o).mobile]]),s(i).mobile?(a(),d("div",Y,r(s(i).mobile),1)):u("",!0),n.value.mobile?(a(),d("div",Z,r(n.value.mobile),1)):u("",!0)]),t("div",ee,[e[27]||(e[27]=t("label",{class:"form-label"},"Numéro d'identification fiscale",-1)),c(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s(o).tax_id=l),type:"text",class:v(["form-control",{"is-invalid":s(i).tax_id}])},null,2),[[p,s(o).tax_id]]),s(i).tax_id?(a(),d("div",se,r(s(i).tax_id),1)):u("",!0)])])])]),t("div",te,[e[32]||(e[32]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Adresse")],-1)),t("div",oe,[t("div",le,[t("div",ie,[e[29]||(e[29]=t("label",{class:"form-label"},"Adresse",-1)),c(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=l=>s(o).address=l),rows:"3",class:v(["form-control",{"is-invalid":s(i).address}])},null,2),[[p,s(o).address]]),s(i).address?(a(),d("div",ne,r(s(i).address),1)):u("",!0)]),t("div",ae,[e[30]||(e[30]=t("label",{class:"form-label"},"Ville",-1)),c(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>s(o).city=l),type:"text",class:v(["form-control",{"is-invalid":s(i).city}])},null,2),[[p,s(o).city]]),s(i).city?(a(),d("div",de,r(s(i).city),1)):u("",!0)]),t("div",re,[e[31]||(e[31]=t("label",{class:"form-label"},"Pays",-1)),c(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>s(o).country=l),type:"text",class:v(["form-control",{"is-invalid":s(i).country}])},null,2),[[p,s(o).country]]),s(i).country?(a(),d("div",ue,r(s(i).country),1)):u("",!0)])])])]),t("div",me,[e[37]||(e[37]=t("div",{class:"card-header"},[t("h5",{class:"card-title mb-0"},"Informations supplémentaires")],-1)),t("div",ce,[t("div",ve,[t("div",pe,[e[33]||(e[33]=t("label",{class:"form-label"},"Notes",-1)),c(t("textarea",{"onUpdate:modelValue":e[18]||(e[18]=l=>s(o).notes=l),rows:"3",class:v(["form-control",{"is-invalid":s(i).notes}])},null,2),[[p,s(o).notes]]),s(i).notes?(a(),d("div",be,r(s(i).notes),1)):u("",!0)]),t("div",fe,[e[35]||(e[35]=t("label",{class:"form-label"},[f(" Statut "),t("span",{class:"text-danger"},"*")],-1)),c(t("select",{"onUpdate:modelValue":e[19]||(e[19]=l=>s(o).status=l),class:v(["form-select",{"is-invalid":s(i).status}]),required:""},[...e[34]||(e[34]=[t("option",{value:"active"},"Actif",-1),t("option",{value:"inactive"},"Inactif",-1)])],2),[[I,s(o).status]]),s(i).status?(a(),d("div",ye,r(s(i).status),1)):u("",!0),e[36]||(e[36]=t("div",{class:"form-text"}," Un fournisseur inactif ne sera pas visible dans les listes ",-1))])])])]),t("div",ke,[t("button",{type:"button",onClick:U,class:"btn btn-primary",disabled:s(y)},[s(y)?(a(),d("span",xe)):(a(),d("i",Ve)),f(" "+r(s(y)?"Création...":"Créer le fournisseur"),1)],8,_e),x(s(V),{href:s(_)("suppliers.index"),class:"btn btn-outline-secondary"},{default:k(()=>[...e[38]||(e[38]=[f(" Annuler ",-1)])]),_:1},8,["href"])])])])])]),_:1}))}});export{Ie as default};
