import{d as V,r as A,c as h,w as m,a as e,j as p,f as o,u as i,l as b,m as g,v as D,p as L,b as u,e as E,o as r,F as _,g as x,t as n,n as y,h as w}from"./app-eRcTGwFI.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-zUMOXHOC.js";import{r as c}from"./routes-C8N3XD_S.js";import{u as j}from"./useSweetAlert-CjcY7Pj8.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BootstrapLayout-COb8ORXi.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const R={class:"d-flex justify-content-between align-items-center mb-4"},$={class:"card mb-4"},z={class:"card-body"},P={class:"row g-3"},U={class:"col-md-4"},G={class:"col-md-3"},q={class:"card"},J={class:"table-responsive"},K={class:"table table-hover mb-0"},Q={class:"text-dark"},W={class:"d-flex align-items-center"},X={class:"fw-medium"},Y={class:"small"},Z={class:"fw-medium"},ee={class:"fw-medium text-success"},se={class:"badge bg-light text-dark"},te={class:"text-end"},le={class:"btn-group",role:"group"},ne=["onClick"],re={key:0,class:"card-footer"},ae={class:"d-flex justify-content-between align-items-center"},oe={class:"d-none d-md-block"},ie={class:"text-muted mb-0"},de={class:"fw-medium"},ue={class:"fw-medium"},ce={class:"fw-medium"},me={class:"pagination pagination-sm mb-0"},be=["innerHTML"],fe=V({__name:"Index",props:{purchaseOrders:{},filters:{}},setup(a){const k=a,{success:C,error:S,confirm:B}=j(),d=A({...k.filters}),M=l=>new Intl.NumberFormat("fr-FR").format(l)+" Fcfa",N=l=>new Date(l).toLocaleDateString("fr-FR"),F=l=>({draft:"bg-secondary",sent:"bg-info",confirmed:"bg-warning",partially_received:"bg-primary",received:"bg-success",cancelled:"bg-danger"})[l]||"bg-secondary",f=()=>{w.get(c("purchase-orders.index"),d.value,{preserveState:!0,replace:!0})},O=()=>{d.value={},f()},T=async l=>{await B(`Êtes-vous sûr de vouloir supprimer le bon de commande "${l.po_number}" ?`)&&w.delete(c("purchase-orders.destroy",{id:l.id}),{onSuccess:()=>{C(`Bon de commande "${l.po_number}" supprimé avec succès !`)},onError:t=>{const v=t.message||"Erreur lors de la suppression du bon de commande.";S(v)}})};return(l,s)=>(r(),h(I,null,{default:m(()=>[e("div",R,[s[3]||(s[3]=e("div",null,[e("h1",{class:"h2 mb-1"},[e("i",{class:"bi bi-file-earmark-text me-2"}),o(" Bons de commande ")]),e("p",{class:"text-muted mb-0"},"Gérez vos bons de commande fournisseurs")],-1)),p(i(b),{href:i(c)("purchase-orders.create"),class:"btn btn-primary"},{default:m(()=>[...s[2]||(s[2]=[e("i",{class:"bi bi-plus-circle me-1"},null,-1),o(" Nouveau bon de commande ",-1)])]),_:1},8,["href"])]),e("div",$,[e("div",z,[e("div",P,[e("div",U,[s[4]||(s[4]=e("label",{class:"form-label"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.value.search=t),type:"text",placeholder:"Numéro de BC ou fournisseur...",class:"form-control",onInput:f},null,544),[[D,d.value.search]])]),e("div",G,[s[6]||(s[6]=e("label",{class:"form-label"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>d.value.status=t),class:"form-select",onChange:f},[...s[5]||(s[5]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"sent"},"Envoyé",-1),e("option",{value:"confirmed"},"Confirmé",-1),e("option",{value:"partially_received"},"Partiellement reçu",-1),e("option",{value:"received"},"Reçu",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[L,d.value.status]])]),e("div",{class:"col-md-2 d-flex align-items-end"},[e("button",{onClick:O,class:"btn btn-outline-secondary w-100"},[...s[7]||(s[7]=[e("i",{class:"bi bi-x-circle me-1"},null,-1),o(" Effacer ",-1)])])])])])]),e("div",q,[e("div",J,[e("table",K,[s[12]||(s[12]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Numéro"),e("th",null,"Fournisseur"),e("th",null,"Date de commande"),e("th",null,"Montant total"),e("th",null,"Articles"),e("th",null,"Statut"),e("th",{class:"text-end"},"Actions")])],-1)),e("tbody",null,[(r(!0),u(_,null,x(a.purchaseOrders.data,t=>(r(),u("tr",{key:t.id},[e("td",null,[e("code",Q,n(t.po_number),1)]),e("td",null,[e("div",W,[s[8]||(s[8]=e("div",{class:"flex-shrink-0 me-2"},[e("div",{class:"bg-light rounded-circle d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"}},[e("i",{class:"bi bi-truck text-muted"})])],-1)),e("div",null,[e("div",X,n(t.supplier?.name||"N/A"),1)])])]),e("td",null,[e("div",Y,[e("div",Z,n(N(t.order_date)),1)])]),e("td",null,[e("div",ee,n(M(t.total_amount)),1)]),e("td",null,[e("span",se,n(t.items?.length||0)+" article(s)",1)]),e("td",null,[e("span",{class:y(["badge",F(t.status)])},n(t.status_label),3)]),e("td",te,[e("div",le,[p(i(b),{href:i(c)("purchase-orders.show",{id:t.id}),class:"btn btn-sm btn-outline-primary",title:"Voir"},{default:m(()=>[...s[9]||(s[9]=[e("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"]),p(i(b),{href:i(c)("purchase-orders.edit",{id:t.id}),class:"btn btn-sm btn-outline-secondary",title:"Modifier"},{default:m(()=>[...s[10]||(s[10]=[e("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["href"]),e("button",{onClick:v=>T(t),class:"btn btn-sm btn-outline-danger",title:"Supprimer"},[...s[11]||(s[11]=[e("i",{class:"bi bi-trash"},null,-1)])],8,ne)])])]))),128))])])]),a.purchaseOrders.links?(r(),u("div",re,[e("div",ae,[e("div",oe,[e("p",ie,[s[13]||(s[13]=o(" Affichage de ",-1)),e("span",de,n(a.purchaseOrders.from),1),s[14]||(s[14]=o(" à ",-1)),e("span",ue,n(a.purchaseOrders.to),1),s[15]||(s[15]=o(" sur ",-1)),e("span",ce,n(a.purchaseOrders.total),1),s[16]||(s[16]=o(" résultats ",-1))])]),e("nav",null,[e("ul",me,[(r(!0),u(_,null,x(a.purchaseOrders.links,t=>(r(),u("li",{key:t.label,class:y(["page-item",{active:t.active,disabled:!t.url}])},[t.url?(r(),h(i(b),{key:0,href:t.url,class:"page-link",innerHTML:t.label},null,8,["href","innerHTML"])):(r(),u("span",{key:1,class:"page-link",innerHTML:t.label},null,8,be))],2))),128))])])])])):E("",!0)])]),_:1}))}}),we=H(fe,[["__scopeId","data-v-2155a8d7"]]);export{we as default};
